(function r(o,n,t){function e(f,i){if(!n[f]){if(!o[f]){var u=new Error("Cannot find module '"+f+"'");throw u.code="MODULE_NOT_FOUND",u}var a=n[f]={exports:{}};o[f][0].call(a.exports,function(r){var n=o[f][1][r];return e(n?n:r)},a,a.exports,void 0,r,o,n,t)}return n[f].exports}return function f(r){var t={modules:o,define:function(r,o){n[r]={exports:o||{}}}};if(o.__bootstrap){var f=e("__bootstrap");f(r,t)}else r()}(function(){for(var r=0;r<t.length;r++)e(t[r])}),e})({1:[function(require,module,exports,define){
var jscookie=require("js-cookie"),Helpers_1=require("./Helpers"),CookieHelpers;!function(e){function o(e,o){void 0===o&&(o="/");var r=Helpers_1["default"].getSubDomains();void 0!=jscookie.get(e)&&jscookie.remove(e,{domain:"",path:o});for(var i=r.length-1;--i>=0&&void 0!=jscookie.get(e);)jscookie.remove(e,{domain:r[i],path:o})}function r(e,o){if(void 0===o&&(o="smartSignalsTest"),!navigator.cookieEnabled)return!1;var r=(new Date).valueOf().toString();try{try{var i=new Date;return i.setSeconds(i.getSeconds()+5),jscookie.set(o,r,{domain:e,expires:i}),jscookie.get(o)===r}finally{jscookie.remove(o,{domain:e})}}catch(n){}return!1}function i(e){return void 0===e&&(e="smartSignalsTest"),void 0!==s?s:s=l&&l.isSupported?!0:r("",e)}function n(e){if(void 0===e&&(e="smartSignalsTest"),l)return l;if(s===!1)return l={isSupported:!1,level:-1,name:void 0};for(var o=Helpers_1["default"].getSubDomains(),i=1;i<o.length-1;i++)if(r(o[i],e))return l={isSupported:!0,name:o[i],level:i};return l=l||s!==!0&&!r("",e)?{isSupported:!1,level:-1,name:void 0}:{isSupported:!0,name:"",level:o.length-1}}function t(e){void 0===e&&(e="smartSignalsTest");var o=n(e);return o.level}function a(e,o){var r;if(0>e){var i=Helpers_1["default"].getDomainLevel(o);r=i+e}else r=e;if(0>=r)return"";var n=Helpers_1["default"].getDomainByLevel(r,o);return-1===n.indexOf(".")?"":"."+n}e.removeFromAllDomains=o,e.canSet=r;var s,l;e.cookiesEnabled=i,e.findFriendlyDomain=n,e.findFriendlyDomainLevel=t,e.getCookieDomainByLevel=a}(CookieHelpers||(CookieHelpers={})),exports.__esModule=!0,exports["default"]=CookieHelpers;

},{"./Helpers":7,"js-cookie":30}],2:[function(require,module,exports,define){
function corsRequest(e){function r(e){if(e.forceKind&&e.forceKind.toUpperCase(),"JSONP"===e.forceKind)return new JSONP_1["default"](e);try{if("undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest)return new CORS_1["default"](e);if("undefined"!=typeof XDomainRequest&&e.url&&0===e.url.indexOf(document.location.protocol)&&document.all&&document.addEventListener)return new CORSIE_1["default"](e)}catch(r){}return new JSONP_1["default"](e)}var t=r(e);return t.run()}var CORS_1=require("./Providers/CORS"),CORSIE_1=require("./Providers/CORSIE"),JSONP_1=require("./Providers/JSONP");exports.__esModule=!0,exports["default"]=corsRequest;

},{"./Providers/CORS":3,"./Providers/CORSIE":4,"./Providers/JSONP":5}],3:[function(require,module,exports,define){
var __extends=this&&this.__extends||function(t,e){function s(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)},JSON=require("json"),request=require("./RequestBase"),CORS=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.prototype._start=function(){var t,e=(this._options.type||"GET").toUpperCase(),s=this._options.url,o=this._options.data;o&&"POST"===e&&(t=JSON.stringify(o));var n=XMLHttpRequest;"undefined"!=typeof xhook&&xhook.XMLHttpRequest&&(n=xhook.XMLHttpRequest);var r=this;this._xhr=new n,this._xhr.onreadystatechange=function(){this.readyState===this.DONE&&(this.status>=200&&this.status<=299?r._onFinished(!1,this.responseText?this.responseText:null,!0):r._onFinished(!0))},this._xhr.open(e,s,!0),this._xhr.setRequestHeader("Accept","application/json"),"POST"==e&&this._xhr.setRequestHeader("Content-type","text/plain"),this._xhr.send(t)},e.prototype.abort=function(){this._aborted=!0,this._xhr&&this._xhr.abort(),this._onAborted()},e}(request.RequestBase);exports.__esModule=!0,exports["default"]=CORS;

},{"./RequestBase":6,"json":"json"}],4:[function(require,module,exports,define){
var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},JSON=require("json"),request=require("./RequestBase"),CORSIE=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.prototype._start=function(){var t,e=(this._options.type||"GET").toUpperCase(),o=this._options.url,n=this._options.data;n&&"POST"===e&&(t=JSON.stringify(n));var s=this;this._xdr=new XDomainRequest,this._xdr.onerror=function(){s._onFinished(!0)},this._xdr.ontimeout=function(){s._onFinished(!0)},this._xdr.onload=function(){s._onFinished(!1,this.responseText,!0)},this._xdr.open(e,o),this._xdr.send(t)},e.prototype.abort=function(){this._xdr.abort(),this._onAborted()},e}(request.RequestBase);exports.__esModule=!0,exports["default"]=CORSIE;

},{"./RequestBase":6,"json":"json"}],5:[function(require,module,exports,define){
var __extends=this&&this.__extends||function(t,s){function e(){this.constructor=t}for(var r in s)s.hasOwnProperty(r)&&(t[r]=s[r]);t.prototype=null===s?Object.create(s):(e.prototype=s.prototype,new e)},core5=require("core5"),JSON=require("json"),request=require("./RequestBase"),JSONP=function(t){function s(s){var e=this;t.call(this,s),this.noop=function(t,s,r,a){if(s){delete e._callbacks[e._callbackName];for(var n in e._scripts)e._scripts[n]&&e._scripts[n].parentElement.removeChild(e._scripts[n])}else try{e._scripts[t]&&e._scripts[t].parentElement.removeChild(e._scripts[t]),e._scripts[t]=null}catch(p){}};var r=window.SmartSignals||(window.SmartSignals={});this._callbacks=r._jsonp||(r._jsonp={})}return __extends(s,t),s.prototype._start=function(){var t,s,e=this,r=(this._options.type||"GET").toUpperCase(),a=this._options.url,n=this._options.data;n&&"POST"===r&&(t=JSON.stringify(n),s=encodeURIComponent(t));var p=2e3,i=Math.round(1000001*Math.random())+""+(new Date).getTime();this._callbackName="j"+i;var l=[],c={parts:[]};if(l.push(c),c.parts.push(a),c.parts.push(-1===a.indexOf("?")?"?":"&"),c.parts.push("_jsonp="),c.partIndex=c.parts.push("")-1,n&&n.clientId?c.parts.push("&_jp="+n.clientId):n&&n.ClientId&&c.parts.push("&_jp="+n.ClientId),c.parts.push("&_jc=SmartSignals._jsonp."+this._callbackName),s){c.parts.push("&_jdl="+t.length),c.parts.push("&_jd=");for(var h=0+i.length+"|99|99".length,o=0;o<c.parts.length;o++)h+=c.parts[o].length;for(var _=p-h;;){if(!(s.length>_)){c.dataIndex=c.parts.push(s)-1;break}var u=s.substr(0,_),d=u.indexOf("%",u.length-2);if(-1!=d&&(u=u.substr(0,d)),c.dataIndex=c.parts.push(u)-1,s=s.substr(u.length),!(s.length>0))break;var m={parts:[]};l.push(m),m.parts.push(a),m.parts.push(-1===a.indexOf("?")?"?":"&"),m.parts.push("_jsonp="),m.partIndex=m.parts.push("")-1,n&&n.clientId?m.parts.push("&_jp="+n.clientId):n&&n.ClientId&&m.parts.push("&_jp="+n.ClientId),m.parts.push("&_jc=SmartSignals._jsonp."+this._callbackName),m.parts.push("&_jd="),h=0+i.length+"|99|99".length;for(var o=0;o<m.parts.length;o++)h+=m.parts[o].length;_=p-h}}for(var o=0;o<l.length;o++){var f=l[o];f.parts[f.partIndex]=i+"|"+l.length.toString()+"|"+(o+1).toString(),f.url=core5.Array.join(f.parts,"")}this._scripts=[],this._callbacks[this._callbackName]=function(t,s,r,a){if(s){delete e._callbacks[e._callbackName];for(var n in e._scripts)e._scripts[n]&&e._scripts[n].parentElement.removeChild(e._scripts[n]);e._onFinished(a,r,!1)}else try{e._scripts[t]&&e._scripts[t].parentElement.removeChild(e._scripts[t]),e._scripts[t]=null}catch(p){}};for(var o=0;o<l.length;o++){var g=document.createElement("script");this._scripts.push(g),g.type="text/javascript",g.charset="utf-8",g.async=!0,g.src=l[o].url;var v=document.getElementsByTagName("head")[0],b=document.getElementsByTagName("base")[0];b&&(v=b.parentNode),b?v.insertBefore(g,b):v.appendChild(g)}},s.prototype.abort=function(){!this._isFinished&&this._callbackName in this._callbacks&&(this._callbacks[this._callbackName]=this.noop),this._onAborted()},s}(request.RequestBase);exports.__esModule=!0,exports["default"]=JSONP;

},{"./RequestBase":6,"core5":"core5","json":"json"}],6:[function(require,module,exports,define){
var JSON=require("json"),Promise=require("promise"),Request=function(){function t(t,e){this._request=t,this.promise=e}return t.prototype.abort=function(){this._request.abort()},t}();exports.Request=Request;var RequestBase=function(){function t(t){this._isFinished=!1,this._options=t}return t.prototype.run=function(){var t=this;return this._promise=new Promise(function(e,r){t._resolve=e,t._reject=r}),this._start(),new Request(this,this._promise)},t.prototype._start=function(){throw new Error("abstract")},t.prototype._onFinished=function(t,e,r){this._isFinished||(this._isFinished=!0,this._isError=t,t?this._reject(new Error("error")):(r&&(e=JSON.parse(e)),this._resolve(e)))},t.prototype._onAborted=function(){this._isFinished||(this._isFinished=!0,this._isAborted=!0,this._reject(new Error("aborted")))},t.prototype.abort=function(){throw new Error("abstract")},t}();exports.RequestBase=RequestBase;

},{"json":"json","promise":"promise"}],7:[function(require,module,exports,define){
var Helpers;!function(t){function n(t,n){try{t&&n in t&&delete t[n]}catch(e){t[n]=void 0}}function e(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0,e="x"==t?n:3&n|8;return e.toString(16)});return t}function r(t){return t?null!=t.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"):!1}function o(t){return t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t}function a(t){if(void 0===y){var n=["Boolean","Number","String","Function","Array","Date","RegExp","Object"];y={};for(var e in n)y["[object "+n[e]+"]"]=n[e].toLowerCase()}return null===t?String(t):y[Object.prototype.toString.call(t)]||"object"}function i(t){return Array.isArray?Array.isArray(t):"array"===a(t)}function c(t){return"function"===a(t)}function u(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}function f(t,n){if(t&&n)if(c(t))n(t);else if(i(t))for(var e in t)c(t[e])&&n(t[e])}function s(t,n){f(t,function(t){n.push(t)})}function d(t,n){function e(t){var n=t.toLowerCase().match(r),e=n[2],o=n[3],a=n[4]||"";return("http:"==e&&":80"==a||"https:"==e&&":443"==a)&&(a=""),e+"//"+o+a}n=n||location.href;var r=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;return e(n)==e(t)}function x(t){if(!t)return m||(m=x(window.location.hostname)),m;for(var n=new Array,e=t.length;(e=t.lastIndexOf(".",e-1))>0;)n.push(t.substr(e+1));return n.push(t),n}function l(t){t||(t=window.location.hostname);for(var n=t.length,e=0;(n=t.lastIndexOf(".",n-1))>0;)e++;return e}function v(t,n){if(!(0>t)){n||(n=window.location.hostname);for(var e=n.length,r=0;(e=n.lastIndexOf(".",e-1))>-1;){if(r>=t||0===e)return n.substr(e+1);r++}return n}}function h(t){for(var n=+new Date;new Date-n<t;);}function p(t,n){t.innerHTML=n;for(var e=t.getElementsByTagName("script"),r=0;r<e.length;r++){var o=e[r],a=document.createElement("script");""!=o.src?a.src=e[r].src:a.text=o.text,a.type="text/javascript",o.parentNode.insertBefore(a,o),o.parentNode.removeChild(o)}}function w(t){if(t)if(document.body)t();else{var n=!1,e=function(){n||document.body&&(n=!0,t())},r=function(){e()},o=function(){e()},a=window.onreadystatechange,i=function(){try{e()}catch(t){}return a.apply(this,arguments)};window.addEventListener?(window.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",o,!1)):window.attachEvent&&window.attachEvent("onload",o),window.onreadystatechange=i}}t.tryDelete=n,t.createGuid=e,t.isValidGuid=r,t.fixUrl=o;var y=void 0;t.type=a,t.isArray=i,t.isFunction=c,t.isEmptyObject=u,t.extractItems=f,t.extractItemsTo=s,t.isSameDomain=d;var m;t.getSubDomains=x,t.getDomainLevel=l,t.getDomainByLevel=v,t.wait=h,t.insertAndExecute=p,t.whenBodyReady=w}(Helpers||(Helpers={})),exports.__esModule=!0,exports["default"]=Helpers;

},{}],8:[function(require,module,exports,define){
var browserDetect;!function(t){function e(t,e){return t in y?y[t]:y[t]=e()}function r(){function t(e){if(O[e]!==u)return O[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=t("json-stringify")&&t("json-parse");else{var i,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var y=p.stringify,f="function"==typeof y&&l;if(f){(i=function(){return 1}).toJSON=i;try{f="0"===y(0)&&"0"===y(new n)&&'""'==y(new o)&&y(s)===u&&y(u)===u&&y()===u&&"1"===y(i)&&"[1]"==y([i])&&"[null]"==y([u])&&"null"==y(null)&&"[null,null,null]"==y([u,s,null])&&y({a:[i,!0,!1,null,"\x00\b\n\f\r	"]})==a&&"1"===y(null,i)&&"[\n 1,\n 2\n]"==y([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==y(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==y(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==y(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==y(new c(-1))}catch(g){f=!1}}r=f}if("json-parse"==e){var b=p.parse;if("function"==typeof b)try{if(0===b("0")&&!b(!1)){i=b(a);var j=5==i.a.length&&1===i.a[0];if(j){try{j=!b('"	"')}catch(g){}if(j)try{j=1!==b("01")}catch(g){}if(j)try{j=1!==b("1.")}catch(g){}}}}catch(g){j=!1}r=j}}return O[e]=!!r}try{var e=window,r=window,n=e.Number||r.Number,o=e.String||r.String,i=e.Object||r.Object,c=e.Date||r.Date,a=(e.SyntaxError||r.SyntaxError,e.TypeError||r.TypeError,e.Math||r.Math,e.JSON||r.JSON),p={};"object"==typeof a&&a&&(p.stringify=a.stringify,p.parse=a.parse);var u,y=i.prototype,s=y.toString,l=new c(-0xc782b5b800cec);try{l=-109252==l.getUTCFullYear()&&0===l.getUTCMonth()&&1===l.getUTCDate()&&10==l.getUTCHours()&&37==l.getUTCMinutes()&&6==l.getUTCSeconds()&&708==l.getUTCMilliseconds()}catch(f){}var O={};return t("json")}catch(g){}return!1}function n(){return e("JSON",r)}function o(){function t(t){try{return t(),!1}catch(e){return!0}}try{var e;if(e="create"in Object&&"getPrototypeOf"in Object&&"defineProperty"in Object&&"defineProperties"in Object&&"getOwnPropertyDescriptor"in Object&&"getOwnPropertyNames"in Object&&"seal"in Object&&"freeze"in Object&&"preventExtensions"in Object&&"isSealed"in Object&&"isFrozen"in Object&&"isExtensible"in Object&&"keys"in Object&&"isArray"in Array&&"now"in Date,"indexOf"in Array.prototype&&"lastIndexOf"in Array.prototype&&"every"in Array.prototype&&"some"in Array.prototype&&"forEach"in Array.prototype&&"map"in Array.prototype&&"filter"in Array.prototype&&"reduce"in Array.prototype&&"reduceRight"in Array.prototype&&"bind"in Function.prototype&&"trim"in String.prototype&&"toISOString"in Date.prototype,e){var r=!!function(){try{return 2==defineProperty({},"a",{get:function(){return 2}}).a}catch(t){}}();e=!r}if(e){var n=new Date(-5e13-1),o=!(n.toISOString&&"0385-07-25T07:06:39.999Z"==n.toISOString()&&t(function(){new Date(NaN).toISOString()}));e=!o}if(e){var i=document&&document.documentElement,c=[],a=c.slice,p=!0;try{i&&a.call(i),p=!1}catch(u){}e=!p}if(e){var y=!1;0 in Object("z")&&"z"=="z"[0]||(y=!0),e=!y}return e}catch(u){}return!1}function i(){return e("Core5",o)}function c(){try{var t=window.Promise;return t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast?!0:!1}catch(e){}return!1}function a(){return e("Promise",c)}function p(t,e){return t in s?s[t]:s[t]=e()}function u(){return p("core5",function(){return{Object:{create:Object.create,getPrototypeOf:Object.getPrototypeOf,defineProperty:Object.defineProperty,defineProperties:Object.defineProperties,getOwnPropertyDescriptor:Object.getOwnPropertyDescriptor,getOwnPropertyNames:Object.getOwnPropertyNames,seal:Object.seal,freeze:Object.freeze,preventExtensions:Object.preventExtensions,isSealed:Object.isSealed,isFrozen:Object.isFrozen,isExtensible:Object.isExtensible,keys:Object.keys},Array:{isArray:Array.isArray,slice:function(){return Function.prototype.call.apply(Array.prototype.slice,arguments)},join:function(){return Function.prototype.call.apply(Array.prototype.join,arguments)},indexOf:function(){return Function.prototype.call.apply(Array.prototype.indexOf,arguments)},lastIndexOf:function(){return Function.prototype.call.apply(Array.prototype.lastIndexOf,arguments)},every:function(){return Function.prototype.call.apply(Array.prototype.every,arguments)},some:function(){return Function.prototype.call.apply(Array.prototype.some,arguments)},forEach:function(){return Function.prototype.call.apply(Array.prototype.forEach,arguments)},map:function(){return Function.prototype.call.apply(Array.prototype.map,arguments)},filter:function(){return Function.prototype.call.apply(Array.prototype.filter,arguments)},reduce:function(){return Function.prototype.call.apply(Array.prototype.reduce,arguments)},reduceRight:function(){return Function.prototype.call.apply(Array.prototype.reduceRight,arguments)}},Function:{bind:function(){return Function.prototype.call.apply(Function.prototype.bind,arguments)}},String:{trim:function(){return Function.prototype.call.apply(String.prototype.trim,arguments)}},Date:{now:Date.now,toISOString:function(){return Function.prototype.call.apply(Date.prototype.toISOString,arguments)}}}})}var y={};t.hasJSON=n,t.hasCore5=i,t.hasPromise=a,t.nativeGetters={JSON:function(){return window.JSON},Promise:function(){return window.Promise},core5:u};var s={}}(browserDetect||(browserDetect={})),module.exports=browserDetect;

},{}],9:[function(require,module,exports,define){
function getFonts(){return fontList}var fontList=["Aharoni","Andalus","Angsana New","AngsanaUPC","Arabic Transparent","Arial","Batang","Browallia New","BrowalliaUPC","Comic Sans MS","Cordia New","CordiaUPC","Courier New","David","DFKai-SB","DilleniaUPC","Estrangelo Edessa","EucrosiaUPC","Franklin Gothic Medium","FrankRuehl","FreesiaUPC","Gautami","Georgia","Gulim","Impact","IrisUPC","JasmineUPC","KaiTi","KodchiangUPC","Latha","Levenim MT","LilyUPC","Lucida Console","Lucida Sans Unicode","Mangal","Marlett","Microsoft Sans Serif","Miriam","Miriam Fixed","MS Gothic","MS Mincho","MV Boli","Narkisim","Palatino Linotype","PMingLiU","Raavi","Rod","Shruti","SimHei","Simplified Arabic","SimSun","Sylfaen","Symbol","Tahoma","Times New Roman","Traditional Arabic","Trebuchet MS","Tunga","Verdana","Webdings","Wingdings","Aparajita","Arabic Typesetting","Arial Unicode MS","BatangChe","Calibri","Cambria","Cambria Math","Candara","Consolas","Constantia","Corbel","DaunPenh","DokChampa","Dotum","DotumChe","Ebrima","Euphemia","FangSong","Gabriola","Gisha","GulimChe","Gungsuh","GungsuhChe","Iskoola Pota","Kalinga","Kartika","Khmer UI","Kokila","Lao UI","Leelawadee","Malgun Gothic","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Mongolian Baiti","MoolBoran","MS PGothic","MS PMincho","MS UI Gothic","NSimSun","Nyala","Plantagenet Cherokee","PMingLiU-ExtB","Sakkal Majalla","Segoe Print","Segoe Script","Segoe UI","Segoe UI Symbol","Shonar Bangla","Simplified Arabic Fixed","SimSun-ExtB","Utsaah","Vani","Vijaya","Vrinda","Gadugi","Microsoft JhengHei UI","Myanmar Text","Nirmala UI","Urdu Typesetting","","Book Antiqua","Arial Narrow","Bookman Old Style","Garamond","Century Gothic","WingDings 2","WingDings 3","VisualUI","MT Extra","Agency FB","Algerian","Arial Rounded MT","Baskerville Old Face","Bauhaus 93","Bell MT","Bernard MT Condensed","Bodoni MT","Bodoni MT Condensed","Bradley Hand ITC","Britannic","Berlin Sans FB","Broadway","Brush Script MT","Californian FB","Calisto MT","Castellar","Century Schoolbook","Centaur","Chiller","Colonna MT","Cooper Black","Copperplate Gothic","Curlz MT","Elephant","Engravers MT","Felix Titling","Forte","Franklin Gothic Book","Freestyle Script","French Script MT","Footlight MT Light","Gigi","Gill Sans MT","Gloucester MT Extra Condensed","Gill Sans MT Ext Condensed","Goudy Old Style","Goudy Stout","Harlow Solid","Harrington","Haettenschweiler","High Tower Text","Imprint MT Shadow","Informal Roman","Blackadder ITC","Edwardian Script ITC","Kristen ITC","Jokerman","Juice ITC","Kunstler Script","Wide Latin","Lucida Bright","Lucida Calligraphy","Lucida Fax","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Magneto","Maiandra GD","Matura MT Script Capitals","Mistral","Modern No. 20","Niagara Engraved","Niagara Solid","OCR A Extended","Old English Text MT","Onyx","Palace Script MT","Papyrus","Parchment","Perpetua","Perpetua Titling MT","Playbill","Poor Richard","Pristina","Rage","Ravie","Rockwell Condensed","Rockwell","Script MT","Showcard Gothic","Snap ITC","Stencil","Tw Cen MT","Tempus Sans ITC","Viner Hand ITC","Vivaldi","Vladimir Script","AdobeArabic","AdobeDevanagari","AdobeHebrew","AdobeMingStd","AdobeMyungjoStd","AdobeSongStd","KozGoPr6N","KozMinPr6N","LetterGothicStd","MinionPro","MyriadHebrew","MyriadPro","ACaslonPro","AdobeFangsongStd","AdobeGothicStd","AdobeNaskh","BirchStd","BlackoakStd","BrushScriptStd","ChaparralPro-Bold","CharlemagneStd","GiddyupStd","HoboStd","KozGoPro","LithosPro","MesquiteStd","MyriadArabic","NuevaStd","OCRAStd","OratorStd","PoplarStd","PrestigeEliteStd","RosewoodStd-Regular","StencilStd","TektonPro","TrajanPro-Bold","TrajanPro-Regular","AlBayan","AmericanTypewriter","Andale Mono","Apple Braille Outline","Apple Braille","Apple Chancery","Apple Color Emoji","Apple LiGothic Medium","Apple LiSung Light","Apple Symbols","AppleGothic","AppleMyungjo","AppleSDGothicNeo","AquaKana","Avenir Next","Avenir","Ayuthaya","Baghdad","Bangla MN","Bangla Sangam MN","Baskerville","BiauKai","BigCaslon","Brush Script","Chalkboard","CharcoalCY","Cochin","Copperplate","Corsiva","Damascus","DecoTypeNaskh","Didot","EuphemiaCAS","Futura","Geeza Pro","Geneva","GillSans","Gungseouche","Gurmukhi","HeadlineA","Hei","HelveLTMM","Herculanum","Hiragino Sans GB W3","Hiragino Sans GB W6","Hoefler Text Ornaments","InaiMathi","Kai","Kailasa","Kannada MN","Kannada Sangam MN","Kefa","Keyboard","Kokonor","Krungthep","KufiStandardGK","Lao MN","LastResort","LucidaGrande","Marion","MarkerFelt","Menlo","Monaco","MshtakanBold","NewPeninimMT","Noteworthy","Optima","Osaka","PCmyoungjo","PTSans","Palatino","Pilgiche","PlantagenetCherokee","Raanana","STIXGeneral","Sathu","Silom","Sinhala","Skia","Thonburi","ZapfDingbats","Zapfino","Roboto","RobotoCondensed","DroidSerif","DroidSans","DroidSansMono","DroidSansFallback","DroidSansJapanese"];exports.__esModule=!0,exports["default"]=getFonts;

},{}],10:[function(require,module,exports,define){
var core5=require("core5"),Modernizr=require("Modernizr"),Fonts_1=require("./Fonts"),Identity=function(){function e(){this._gFonts=Fonts_1["default"]()}return e.prototype.userAgentKey=function(){return navigator?navigator.userAgent:void 0},e.prototype.languageKey=function(){return navigator?navigator.language:void 0},e.prototype.colorDepthKey=function(){return screen?screen.colorDepth:void 0},e.prototype.screenWidthKey=function(){return screen?screen.width:void 0},e.prototype.screenHeigthKey=function(){return screen?screen.height:void 0},e.prototype.timezoneOffsetKey=function(){return(new Date).getTimezoneOffset()},e.prototype.cookiesEnabledKey=function(){var e=!1;return navigator&&(e=navigator.cookieEnabled?!0:!1),navigator&&"undefined"==typeof navigator.cookieEnabled&&(document.cookie="testcookie",e="string"!=typeof document.cookie&&-1!=document.cookie.indexOf("testcookie")?!0:!1),e},e.prototype.sessionStorageKey=function(){return Modernizr?Modernizr.sessionstorage:void 0},e.prototype.localStorageKey=function(){return Modernizr?Modernizr.localstorage:void 0},e.prototype.indexedDbKey=function(){return Modernizr?Modernizr.indexeddb:void 0},e.prototype.cpuClassKey=function(){return navigator?navigator.cpuClass:void 0},e.prototype.platformKey=function(){return navigator.platform?navigator.platform:void 0},e.prototype.doNotTrackKey=function(){var e;return navigator&&(e=navigator.doNotTrack),"undefined"==typeof e&&window&&(e=window.doNotTrack),e},e.prototype.canvasKey=function(){var e=document.createElement("canvas");e.style.border="1px solid black";var t=document.getElementById("smasi-canvasContainer");if(t&&t.appendChild(e),!(e&&e.getContext&&e.getContext("2d")))return"0";e.width=400,e.height=200;var o=e.getContext("2d");o.fillStyle="#f60",o.fillRect(80,60,120,100),o.fillStyle="#069",o.beginPath(),o.arc(200,140,50,0,2*Math.PI,!1),o.lineWidth=20,o.strokeStyle="#003300",o.stroke();var n="Cwm fjordbank glyphs vext quiz";o.font="28px 'Arial'",o.fillText(n,0,90),o.fillStyle="rgba(102, 204, 0, 0.7)",o.fillText(n,10,100);var r=e.toDataURL().replace("data:image/png;base64,","");r=window.atob(r);var i=r.slice(-20,-16),a=this.string2Bin(i);return parseInt(a,2).toString(16)},e.prototype.string2Bin=function(e){for(var t,o,n="",r=0,t=e.length;t>r;++r)o=e.charCodeAt(r).toString(2),o=this.pad(o,8),n+=o;return n},e.prototype.pad=function(e,t,o){return o=o||"0",e+="",e.length>=t?e:core5.Array.join(new Array(t-e.length+1),o)+e},e.prototype.geolocationKey=function(){return Modernizr?Modernizr.geolocation:void 0},e.prototype.pluginsKey=function(){if(navigator&&navigator.plugins){for(var e=new Array,t=navigator.plugins,o=t.length;o--;)e.push(navigator.plugins[o].name);return core5.Array.join(e,";")}},e.prototype.mimeTypesKey=function(){if(navigator&&navigator.mimeTypes){for(var e=new Array,t=0,o=navigator.mimeTypes.length;o>t;++t)e.push(navigator.mimeTypes[t].type);return core5.Array.join(e,";")}},e.prototype.javaEnabledKey=function(){return navigator?navigator.javaEnabled():void 0},e.prototype.jsFontsKey=function(){if(this._gFonts){var e=["monospace","sans-serif","serif"],t="mmmmmmmmmmlli",o="72px",n=document.getElementsByTagName("body")[0],r=document.createElement("span");r.style.fontSize=o,r.style.position="absolute",r.style.visibility="hidden",r.innerHTML=t,n.appendChild(r);var i,a,s=new Array,p=new Array;for(i=e.length;i--;)a=e[i],r.style.fontFamily=a,s[i]=r.offsetWidth,p[i]=r.offsetHeight;var d,u=function(t){for(d=e.length;d--;)if(a=e[d],r.style.fontFamily=t+","+a,r.offsetWidth!==s[d]||r.offsetHeight!==p[d])return!0;return!1},l=new Array;for(i=this._gFonts.length;i--;){var y=this._gFonts[i];u(y)&&l.push(y)}return n.removeChild(r),core5.Array.join(l,";")}},e}();exports.__esModule=!0,exports["default"]=Identity;

},{"./Fonts":9,"Modernizr":11,"core5":"core5"}],11:[function(require,module,exports,define){
(function (global){
module.exports=function(n,e,t){function r(n){v.cssText=n}function o(n,e){return typeof n===e}function i(n,e){return!!~(""+n).indexOf(e)}function u(n,e){for(var r in n){var o=n[r];if(!i(o,"-")&&v[o]!==t)return"pfx"==e?o:!0}return!1}function a(n,e,r){for(var i in n){var u=e[n[i]];if(u!==t)return r===!1?n[i]:o(u,"function")?u.bind(r||e):u}return!1}function s(n,e,t){var r=n.charAt(0).toUpperCase()+n.slice(1),i=(n+" "+h.join(r+" ")+r).split(" ");return o(e,"string")||o(e,"undefined")?u(i,e):(i=(n+" "+x.join(r+" ")+r).split(" "),a(i,e,t))}var c,f,l,p="2.8.3",d={},m=e.documentElement,y="modernizr",g=e.createElement(y),v=g.style,b=({}.toString,"Webkit Moz O ms"),h=b.split(" "),x=b.toLowerCase().split(" "),w={},C=[],P=C.slice,S={}.hasOwnProperty;l=o(S,"undefined")||o(S.call,"undefined")?function(n,e){return e in n&&o(n.constructor.prototype[e],"undefined")}:function(n,e){return S.call(n,e)},Function.prototype.bind||(Function.prototype.bind=function(n){var e=this;if("function"!=typeof e)throw new TypeError;var t=P.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=e.prototype;var i=new o,u=e.apply(i,t.concat(P.call(arguments)));return Object(u)===u?u:i}return e.apply(n,t.concat(P.call(arguments)))};return r}),w.geolocation=function(){return"geolocation"in navigator},w.indexedDB=function(){return!!s("indexedDB",n)},w.localstorage=function(){try{return localStorage.setItem(y,y),localStorage.removeItem(y),!0}catch(n){return!1}},w.sessionstorage=function(){try{return sessionStorage.setItem(y,y),sessionStorage.removeItem(y),!0}catch(n){return!1}};for(var j in w)l(w,j)&&(f=j.toLowerCase(),d[f]=w[j](),C.push((d[f]?"":"no-")+f));return d.addTest=function(n,e){if("object"==typeof n)for(var r in n)l(n,r)&&d.addTest(r,n[r]);else{if(n=n.toLowerCase(),d[n]!==t)return d;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(m.className+=" "+(e?"":"no-")+n),d[n]=e}return d},r(""),g=c=null,d._version=p,d._domPrefixes=x,d._cssomPrefixes=h,d.testProp=function(n){return u([n])},d.testAllProps=s,d}(global,global.document);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],12:[function(require,module,exports,define){
module.exports=function(r){function n(r,n,t){for(;0<t--;)r.push(n)}function t(r,n){return r<<n|r>>>32-n}function u(r,n,t){return r^n^t}function o(r,n){var t=(65535&n)+(65535&r),u=(n>>>16)+(r>>>16)+(t>>>16);return(65535&u)<<16|65535&t}var e="0123456789abcdef";return function(r){for(var n,t=[],u=4*r.length,o=0;u>o;o++)n=r[o>>2]>>8*(3-o%4),t.push(e.charAt(n>>4&15)+e.charAt(15&n));return t.join("")}(function(r,e){var f,c,a,i,h,v=r.length,l=1732584193,g=4023233417,s=2562383102,d=271733878,p=3285377520,A=[];n(A,1518500249,20),n(A,1859775393,20),n(A,2400959708,20),n(A,3395469782,20),r[e>>5]|=128<<24-e%32,r[(e+65>>9<<4)+15]=e;for(var b=0;v>b;b+=16){f=l,c=g,a=s,i=d,h=p;for(var j=0,m=[];80>j;j++){m[j]=16>j?r[j+b]:t(m[j-3]^m[j-8]^m[j-14]^m[j-16],1);var x=function(r,n,t,u,o){var e=(65535&o)+(65535&r)+(65535&n)+(65535&t)+(65535&u),f=(o>>>16)+(r>>>16)+(n>>>16)+(t>>>16)+(u>>>16)+(e>>>16);return(65535&f)<<16|65535&e}(20>j?function(r,n,t){return r&n^~r&t}(c,a,i):40>j?u(c,a,i):60>j?function(r,n,t){return r&n^r&t^n&t}(c,a,i):u(c,a,i),h,A[j],m[j],t(f,5));h=i,i=a,a=t(c,30),c=f,f=x}l=o(l,f),g=o(g,c),s=o(s,a),d=o(d,i),p=o(p,h)}return[l,g,s,d,p]}(function(r){for(var n=[],t=255,u=8*r.length,o=0;u>o;o+=8)n[o>>5]|=(r.charCodeAt(o/8)&t)<<24-o%32;return n}(r).slice(),8*r.length))};

},{}],13:[function(require,module,exports,define){
function resolve(e,t){_data?t&&t(_data):setTimeout(function(){_data=create(e),t&&t(_data)},5)}function create(e){var t=new Identity_1["default"],a={};a.RequestAccept=e.Accept,a.RequestAcceptEncoding=e.AcceptEncoding,a.RequestAcceptLanguage=e.AcceptLanguage,a.Canvas=t.canvasKey(),a.ColorDepth=t.colorDepthKey(),a.CookiesEnabled=t.cookiesEnabledKey(),a.CpuClass=t.cpuClassKey(),a.DoNotTrack=t.doNotTrackKey(),a.Geolocation=t.geolocationKey(),a.IndexedDB=t.indexedDbKey(),a.JavaEnabled=t.javaEnabledKey(),a.JsFonts=t.jsFontsKey(),a.Language=t.languageKey(),a.LocalStorage=t.localStorageKey(),a.MimeTypes=t.mimeTypesKey(),a.Platform=t.platformKey(),a.Plugins=t.pluginsKey(),a.ScreenHeight=t.screenHeigthKey(),a.ScreenWidth=t.screenWidthKey(),a.SessionStorage=t.sessionStorageKey(),a.TimezoneOffset=t.timezoneOffsetKey(),a.UserAgent=t.userAgentKey();var n="";for(var o in a)n+=a[o]||"";return a.Hash=SHA1(n),a}var Identity_1=require("./Identity"),SHA1=require("tinySHA1"),XtrackMember=function(){function e(e,t,a){this.name=e,this.value=t,this.duration=a}return e}();exports.XtrackMember=XtrackMember;var _data;exports.resolve=resolve;

},{"./Identity":10,"tinySHA1":12}],14:[function(require,module,exports,define){
(function (global){
JSON=global.JSON=require("json");var __browserify_shim_require__=require;(function(e,n,t){!function(n,t,o,a,r,i){function c(e,n){var t=typeof e[n];return"function"==t||!("object"!=t||!e[n])||"unknown"==t}function s(e,n){return!("object"!=typeof e[n]||!e[n])}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(){var e="Shockwave Flash",n="application/x-shockwave-flash";if(!b(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var t=navigator.plugins[e].description;t&&!b(navigator.mimeTypes)&&navigator.mimeTypes[n]&&navigator.mimeTypes[n].enabledPlugin&&(R=t.match(/\d+/g))}if(!R){var o;try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),R=Array.prototype.slice.call(o.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),o=null}catch(a){}}if(!R)return!1;var r=parseInt(R[0],10),i=parseInt(R[1],10);return F=r>9&&i>0,!0}function p(){if(!z){z=!0;for(var e=0;e<U.length;e++)U[e]();U.length=0}}function f(e,n,t){return z||t?void e.call(n):void U.push(function(){e.call(n)})}function d(){var e=parent;if(""!==L)for(var n=0,t=L.split(".");n<t.length;n++)e=e[t[n]];return e.easyXDM}function m(e){return n.easyXDM=I,L=e,L&&(W="easyXDM_"+L.replace(".","_")+"_"),A}function h(e){return e.match(D)[3]}function g(e){return e.match(D)[4]||""}function v(e){var n=e.toLowerCase().match(D),t=n[2],o=n[3],a=n[4]||"";return("http:"==t&&":80"==a||"https:"==t&&":443"==a)&&(a=""),t+"//"+o+a}function y(e){if(e=e.replace(J,"$1/"),!e.match(/^(http||https):\/\//)){var n="/"===e.substring(0,1)?"":o.pathname;"/"!==n.substring(n.length-1)&&(n=n.substring(0,n.lastIndexOf("/")+1)),e=o.protocol+"//"+o.host+n+e}for(;B.test(e);)e=e.replace(B,"");return e}function w(e,n){var t="",o=e.indexOf("#");-1!==o&&(t=e.substring(o),e=e.substring(0,o));var a=[];for(var r in n)n.hasOwnProperty(r)&&a.push(r+"="+i(n[r]));return e+(X?"#":-1==e.indexOf("?")?"?":"&")+a.join("&")+t}function b(e){return"undefined"==typeof e}function k(e,n,t){var o;for(var a in n)n.hasOwnProperty(a)&&(a in e?(o=n[a],"object"==typeof o?k(e[a],o,t):t||(e[a]=n[a])):e[a]=n[a]);return e}function _(){var e=t.body.appendChild(t.createElement("form")),n=e.appendChild(t.createElement("input"));n.name=W+"TEST"+H,E=n!==e.elements[n.name],t.body.removeChild(e)}function x(e){b(E)&&_();var n;if(E)try{n=t.createElement('<iframe name="'+e.props.name+'"/>')}catch(o){n=t.createElement("IFRAME"),n.name=e.props.name}else n=t.createElement("IFRAME"),n.name=e.props.name;n.id=n.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=t.getElementById(e.container)),e.container||(k(n.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=t.body);var a=e.props.src;if(e.props.src="javascript:false",k(n,e.props),n.border=n.frameBorder=0,n.allowTransparency=!0,e.container.appendChild(n),e.onLoad&&N(n,"load",e.onLoad),e.usePost){var r,i=e.container.appendChild(t.createElement("form"));if(i.target=n.name,i.action=a,i.method="POST","object"==typeof e.usePost)for(var c in e.usePost)e.usePost.hasOwnProperty(c)&&(E?r=t.createElement('<input name="'+c+'"/>'):(r=t.createElement("INPUT"),r.name=c),r.value=e.usePost[c],i.appendChild(r));i.submit(),i.parentNode.removeChild(i)}else n.src=a;return e.props.src=a,n}function O(e,n){"string"==typeof e&&(e=[e]);for(var t,o=e.length;o--;)if(t=e[o],t=new RegExp("^"==t.substr(0,1)?t:"^"+t.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),t.test(n))return!0;return!1}function M(e){var a,r=e.protocol;if(e.isHost=e.isHost||b(Q.xdm_p),X=e.hash||!1,e.props||(e.props={}),e.isHost)e.remote=y(e.remote),e.channel=e.channel||"default"+H++,e.secret=Math.random().toString(16).substring(2),b(r)&&(r=v(o.href)==v(e.remote)?"4":c(n,"postMessage")||c(t,"postMessage")?"1":e.swf&&c(n,"ActiveXObject")&&u()?"6":"Gecko"===navigator.product&&"frameElement"in n&&-1==navigator.userAgent.indexOf("WebKit")?"5":e.remoteHelper?"2":"0");else if(e.channel=Q.xdm_c.replace(/["'<>\\]/g,""),e.secret=Q.xdm_s,e.remote=Q.xdm_e.replace(/["'<>\\]/g,""),r=Q.xdm_p,e.acl&&!O(e.acl,e.remote))throw new Error("Access denied for "+e.remote);switch(e.protocol=r,r){case"0":if(k(e,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),e.isHost){if(!e.local){for(var i,s=o.protocol+"//"+o.host,l=t.body.getElementsByTagName("img"),p=l.length;p--;)if(i=l[p],i.src.substring(0,s.length)===s){e.local=i.src;break}e.local||(e.local=n)}var f={xdm_c:e.channel,xdm_p:0};e.local===n?(e.usePolling=!0,e.useParent=!0,e.local=o.protocol+"//"+o.host+o.pathname+o.search,f.xdm_e=e.local,f.xdm_pa=1):f.xdm_e=y(e.local),e.container&&(e.useResize=!1,f.xdm_po=1),e.remote=w(e.remote,f)}else k(e,{channel:Q.xdm_c,remote:Q.xdm_e,useParent:!b(Q.xdm_pa),usePolling:!b(Q.xdm_po),useResize:e.useParent?!1:e.useResize});a=[new A.stack.HashTransport(e),new A.stack.ReliableBehavior({}),new A.stack.QueueBehavior({encode:!0,maxLength:4e3-e.remote.length}),new A.stack.VerifyBehavior({initiate:e.isHost})];break;case"1":a=[new A.stack.PostMessageTransport(e)];break;case"2":e.isHost&&(e.remoteHelper=y(e.remoteHelper)),a=[new A.stack.NameTransport(e),new A.stack.QueueBehavior,new A.stack.VerifyBehavior({initiate:e.isHost})];break;case"3":a=[new A.stack.NixTransport(e)];break;case"4":a=[new A.stack.SameOriginTransport(e)];break;case"5":a=[new A.stack.FrameElementTransport(e)];break;case"6":R||u(),a=[new A.stack.FlashTransport(e)]}return a.push(new A.stack.QueueBehavior({lazy:e.lazy,remove:!0})),a}function S(e){for(var n,t={incoming:function(e,n){this.up.incoming(e,n)},outgoing:function(e,n){this.down.outgoing(e,n)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},o=0,a=e.length;a>o;o++)n=e[o],k(n,t,!0),0!==o&&(n.down=e[o-1]),o!==a-1&&(n.up=e[o+1]);return n}function T(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}var E,R,F,N,P,C=this,H=Math.floor(1e4*Math.random()),j=Function.prototype,D=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,B=/[\-\w]+\/\.\.\//,J=/([^:])\/\//g,L="",A={},I=n.easyXDM,W="easyXDM_",X=!1;if(c(n,"addEventListener"))N=function(e,n,t){e.addEventListener(n,t,!1)},P=function(e,n,t){e.removeEventListener(n,t,!1)};else{if(!c(n,"attachEvent"))throw new Error("Browser not supported");N=function(e,n,t){e.attachEvent("on"+n,t)},P=function(e,n,t){e.detachEvent("on"+n,t)}}var q,z=!1,U=[];if("readyState"in t?(q=t.readyState,z="complete"==q||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==q||"interactive"==q)):z=!!t.body,!z){if(c(n,"addEventListener"))N(t,"DOMContentLoaded",p);else if(N(t,"readystatechange",function(){"complete"==t.readyState&&p()}),t.documentElement.doScroll&&n===top){var V=function(){if(!z){try{t.documentElement.doScroll("left")}catch(e){return void a(V,1)}p()}};V()}N(n,"load",p)}var Q=function(e){e=e.substring(1).split("&");for(var n,t={},o=e.length;o--;)n=e[o].split("="),t[n[0]]=r(n[1]);return t}(/xdm_e=/.test(o.search)?o.search:o.hash),$=function(){var e={},n={a:[1,2,3]},t='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(n).replace(/\s/g,"")===t?JSON:(Object.toJSON&&Object.toJSON(n).replace(/\s/g,"")===t&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(n=t.evalJSON(),n.a&&3===n.a.length&&3===n.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?($=function(){return e},e):null)};k(A,{version:"2.4.19.3",query:Q,stack:{},apply:k,getJSONObject:$,whenReady:f,noConflict:m}),A.DomHelper={on:N,un:P,requiresJSON:function(e){s(n,"JSON")||t.write('<script type="text/javascript" src="'+e+'"></script>')}},function(){var e={};A.Fn={set:function(n,t){e[n]=t},get:function(n,t){if(e.hasOwnProperty(n)){var o=e[n];return t&&delete e[n],o}}}}(),A.Socket=function(e){var n=S(M(e).concat([{incoming:function(n,t){e.onMessage(n,t)},callback:function(n){e.onReady&&e.onReady(n)}}])),t=v(e.remote);this.origin=v(e.remote),this.destroy=function(){n.destroy()},this.postMessage=function(e){n.outgoing(e,t)},n.init()},A.Rpc=function(e,n){if(n.local)for(var t in n.local)if(n.local.hasOwnProperty(t)){var o=n.local[t];"function"==typeof o&&(n.local[t]={method:o})}var a=S(M(e).concat([new A.stack.RpcBehavior(this,n),{callback:function(n){e.onReady&&e.onReady(n)}}]));this.origin=v(e.remote),this.destroy=function(){a.destroy()},a.init()},A.stack.SameOriginTransport=function(e){var n,t,r,i;return n={outgoing:function(e,n,t){r(e),t&&t()},destroy:function(){t&&(t.parentNode.removeChild(t),t=null)},onDOMReady:function(){i=v(e.remote),e.isHost?(k(e.props,{src:w(e.remote,{xdm_e:o.protocol+"//"+o.host+o.pathname,xdm_c:e.channel,xdm_p:4}),name:W+e.channel+"_provider"}),t=x(e),A.Fn.set(e.channel,function(e){return r=e,a(function(){n.up.callback(!0)},0),function(e){n.up.incoming(e,i)}})):(r=d().Fn.get(e.channel,!0)(function(e){n.up.incoming(e,i)}),a(function(){n.up.callback(!0)},0))},init:function(){f(n.onDOMReady,n,e.immediate)}}},A.stack.FlashTransport=function(e){function n(e,n){a(function(){c.up.incoming(e,l)},0)}function r(n){var o=e.swf+"?host="+e.isHost,a="easyXDM_swf_"+Math.floor(1e4*Math.random());A.Fn.set("flash_loaded"+n.replace(/[\-.]/g,"_"),function(){A.stack.FlashTransport[n].swf=u=p.firstChild;for(var e=A.stack.FlashTransport[n].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?p="string"==typeof e.swfContainer?t.getElementById(e.swfContainer):e.swfContainer:(p=t.createElement("div"),k(p.style,F&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(p));var r="callback=flash_loaded"+i(n.replace(/[\-.]/g,"_"))+"&proto="+C.location.protocol+"&domain="+i(h(C.location.href))+"&port="+i(g(C.location.href))+"&ns="+i(L);p.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+a+"' data='"+o+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+o+"'></param><param name='flashvars' value='"+r+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+r+"' allowScriptAccess='always' wmode='transparent' src='"+o+"' height='1' width='1'></embed></object>"}var c,s,l,u,p;return c={outgoing:function(n,t,o){u.postMessage(e.channel,n.toString()),o&&o()},destroy:function(){try{u.destroyChannel(e.channel)}catch(n){}u=null,s&&(s.parentNode.removeChild(s),s=null)},onDOMReady:function(){l=e.remote,A.Fn.set("flash_"+e.channel+"_init",function(){a(function(){c.up.callback(!0)})}),A.Fn.set("flash_"+e.channel+"_onMessage",n),e.swf=y(e.swf);var t=h(e.swf),i=function(){A.stack.FlashTransport[t].init=!0,u=A.stack.FlashTransport[t].swf,u.createChannel(e.channel,e.secret,v(e.remote),e.isHost),e.isHost&&(F&&e.swfNoThrottle&&k(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),k(e.props,{src:w(e.remote,{xdm_e:v(o.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:W+e.channel+"_provider"}),s=x(e))};A.stack.FlashTransport[t]&&A.stack.FlashTransport[t].init?i():A.stack.FlashTransport[t]?A.stack.FlashTransport[t].queue.push(i):(A.stack.FlashTransport[t]={queue:[i]},r(t))},init:function(){f(c.onDOMReady,c,e.immediate)}}},A.stack.PostMessageTransport=function(e){function t(e){if(e.origin)return v(e.origin);if(e.uri)return v(e.uri);if(e.domain)return o.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function r(n){if("string"==typeof n.data){var o=t(n);o==l&&n.data.substring(0,e.channel.length+1)==e.channel+" "&&i.up.incoming(n.data.substring(e.channel.length+1),o)}}var i,c,s,l;return i={outgoing:function(n,t,o){s.postMessage(e.channel+" "+n,t||l),o&&o()},destroy:function(){P(n,"message",r),c&&(s=null,c.parentNode.removeChild(c),c=null)},onDOMReady:function(){if(l=v(e.remote),e.isHost){var t=function(o){o.data==e.channel+"-ready"&&(s="postMessage"in c.contentWindow?c.contentWindow:c.contentWindow.document,P(n,"message",t),N(n,"message",r),a(function(){i.up.callback(!0)},0))};N(n,"message",t),k(e.props,{src:w(e.remote,{xdm_e:v(o.href),xdm_c:e.channel,xdm_p:1}),name:W+e.channel+"_provider"}),c=x(e)}else N(n,"message",r),s="postMessage"in n.parent?n.parent:n.parent.document,s.postMessage(e.channel+"-ready",l),a(function(){i.up.callback(!0)},0)},init:function(){f(i.onDOMReady,i,e.immediate)}}},A.stack.FrameElementTransport=function(e){var r,i,c,s;return r={outgoing:function(e,n,t){c.call(this,e),t&&t()},destroy:function(){i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){s=v(e.remote),e.isHost?(k(e.props,{src:w(e.remote,{xdm_e:v(o.href),xdm_c:e.channel,xdm_p:5}),name:W+e.channel+"_provider"}),i=x(e),i.fn=function(e){return delete i.fn,c=e,a(function(){r.up.callback(!0)},0),function(e){r.up.incoming(e,s)}}):(t.referrer&&v(t.referrer)!=Q.xdm_e&&(n.top.location=Q.xdm_e),c=n.frameElement.fn(function(e){r.up.incoming(e,s)}),r.up.callback(!0))},init:function(){f(r.onDOMReady,r,e.immediate)}}},A.stack.NameTransport=function(e){function n(n){var t=e.remoteHelper+(c?"#_3":"#_2")+e.channel;s.contentWindow.sendMessage(n,t)}function t(){c?2!==++u&&c||i.up.callback(!0):(n("ready"),i.up.callback(!0))}function o(e){i.up.incoming(e,d)}function r(){p&&a(function(){p(!0)},0)}var i,c,s,l,u,p,d,m;return i={outgoing:function(e,t,o){p=o,n(e)},destroy:function(){s.parentNode.removeChild(s),s=null,c&&(l.parentNode.removeChild(l),l=null)},onDOMReady:function(){c=e.isHost,u=0,d=v(e.remote),e.local=y(e.local),c?(A.Fn.set(e.channel,function(n){c&&"ready"===n&&(A.Fn.set(e.channel,o),t())}),m=w(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),k(e.props,{src:m+"#"+e.channel,name:W+e.channel+"_provider"}),l=x(e)):(e.remoteHelper=e.remote,A.Fn.set(e.channel,o));var n=function(){var o=s||this;P(o,"load",n),A.Fn.set(e.channel+"_load",r),function i(){"function"==typeof o.contentWindow.sendMessage?t():a(i,50)}()};s=x({props:{src:e.local+"#_4"+e.channel},onLoad:n})},init:function(){f(i.onDOMReady,i,e.immediate)}}},A.stack.HashTransport=function(e){function t(n){if(h){var t=e.remote+"#"+d++ +"_"+n;(s||!g?h.contentWindow:h).location=t}}function o(e){p=e,c.up.incoming(p.substring(p.indexOf("_")+1),y)}function r(){if(m){var e=m.location.href,n="",t=e.indexOf("#");-1!=t&&(n=e.substring(t)),n&&n!=p&&o(n)}}function i(){l=setInterval(r,u)}var c,s,l,u,p,d,m,h,g,y;return c={outgoing:function(e,n){t(e)},destroy:function(){n.clearInterval(l),(s||!g)&&h.parentNode.removeChild(h),h=null},onDOMReady:function(){if(s=e.isHost,u=e.interval,p="#"+e.channel,d=0,g=e.useParent,y=v(e.remote),s){if(k(e.props,{src:e.remote,name:W+e.channel+"_provider"}),g)e.onLoad=function(){m=n,i(),c.up.callback(!0)};else{var t=0,o=e.delay/50;!function r(){if(++t>o)throw new Error("Unable to reference listenerwindow");try{m=h.contentWindow.frames[W+e.channel+"_consumer"]}catch(n){}m?(i(),c.up.callback(!0)):a(r,50)}()}h=x(e)}else m=n,i(),g?(h=parent,c.up.callback(!0)):(k(e,{props:{src:e.remote+"#"+e.channel+new Date,name:W+e.channel+"_consumer"},onLoad:function(){c.up.callback(!0)}}),h=x(e))},init:function(){f(c.onDOMReady,c,e.immediate)}}},A.stack.ReliableBehavior=function(e){var n,t,o=0,a=0,r="";return n={incoming:function(e,i){var c=e.indexOf("_"),s=e.substring(0,c).split(",");e=e.substring(c+1),s[0]==o&&(r="",t&&t(!0)),e.length>0&&(n.down.outgoing(s[1]+","+o+"_"+r,i),a!=s[1]&&(a=s[1],n.up.incoming(e,i)))},outgoing:function(e,i,c){r=e,t=c,n.down.outgoing(a+","+ ++o+"_"+e,i)}}},A.stack.QueueBehavior=function(e){function n(){if(e.remove&&0===c.length)return void T(t);if(!s&&0!==c.length&&!o){s=!0;var r=c.shift();t.down.outgoing(r.data,r.origin,function(e){s=!1,r.callback&&a(function(){r.callback(e)},0),n()})}}var t,o,c=[],s=!0,l="",u=0,p=!1,f=!1;return t={init:function(){b(e)&&(e={}),e.maxLength&&(u=e.maxLength,f=!0),e.lazy?p=!0:t.down.init()},callback:function(e){s=!1;var o=t.up;n(),o.callback(e)},incoming:function(n,o){if(f){var a=n.indexOf("_"),i=parseInt(n.substring(0,a),10);l+=n.substring(a+1),0===i&&(e.encode&&(l=r(l)),t.up.incoming(l,o),l="")}else t.up.incoming(n,o)},outgoing:function(o,a,r){e.encode&&(o=i(o));var s,l=[];if(f){for(;0!==o.length;)s=o.substring(0,u),o=o.substring(s.length),l.push(s);for(;s=l.shift();)c.push({data:l.length+"_"+s,origin:a,callback:0===l.length?r:null})}else c.push({data:o,origin:a,callback:r});p?t.down.init():n()},destroy:function(){o=!0,t.down.destroy()}}},A.stack.VerifyBehavior=function(e){function n(){o=Math.random().toString(16).substring(2),t.down.outgoing(o)}var t,o,a;return t={incoming:function(r,i){var c=r.indexOf("_");-1===c?r===o?t.up.callback(!0):a||(a=r,e.initiate||n(),t.down.outgoing(r)):r.substring(0,c)===a&&t.up.incoming(r.substring(c+1),i)},outgoing:function(e,n,a){t.down.outgoing(o+"_"+e,n,a)},callback:function(t){e.initiate&&n()}}},A.stack.RpcBehavior=function(e,n){function t(e){e.jsonrpc="2.0",r.down.outgoing(i.stringify(e))}function o(e,n){var o=Array.prototype.slice;return function(){var a,r=arguments.length,i={method:n};r>0&&"function"==typeof arguments[r-1]?(r>1&&"function"==typeof arguments[r-2]?(a={success:arguments[r-2],error:arguments[r-1]},i.params=o.call(arguments,0,r-2)):(a={success:arguments[r-1]},i.params=o.call(arguments,0,r-1)),s[""+ ++c]=a,i.id=c):i.params=o.call(arguments,0),e.namedParams&&1===i.params.length&&(i.params=i.params[0]),t(i)}}function a(e,n,o,a){if(!o)return void(n&&t({id:n,error:{code:-32601,message:"Procedure not found."}}));var r,i;n?(r=function(e){r=j,t({id:n,result:e})},i=function(e,o){i=j;var a={id:n,error:{code:-32099,message:e}};o&&(a.error.data=o),t(a)}):r=i=j,l(a)||(a=[a]);try{var c=o.method.apply(o.scope,a.concat([r,i]));b(c)||r(c)}catch(s){i(s.message)}}var r,i=n.serializer||$(),c=0,s={};return r={incoming:function(e,o){var r=i.parse(e);if(r.method)n.handle?n.handle(r,t):a(r.method,r.id,n.local[r.method],r.params);else{var c=s[r.id];r.error?c.error&&c.error(r.error):c.success&&c.success(r.result),delete s[r.id]}},init:function(){if(n.remote)for(var t in n.remote)n.remote.hasOwnProperty(t)&&(e[t]=o(n.remote[t],t));r.down.init()},destroy:function(){for(var t in n.remote)n.remote.hasOwnProperty(t)&&e.hasOwnProperty(t)&&delete e[t];r.down.destroy()}}},"object"==typeof e&&"object"==typeof e.exports?e.exports=A:C.easyXDM=A}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent)}).call(global,module,void 0,void 0);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"json":"json"}],15:[function(require,module,exports,define){
var featureDetection;!function(e){function t(e,t){return e in i?i[e]:i[e]=t()}function n(e){s=e.testKey||s}function r(){return t("embeded",function(){try{if(window.top!=window)return!0}catch(e){return!0}})}function o(){return t("localStorage",function(){try{var e=window.localStorage;if(e){var t=(new Date).valueOf().toString();e.setItem(s,t);var n=e.getItem(s)==t;return e.removeItem(s),n}}catch(r){}return!1})}function a(){return t("sessionStorage",function(){try{var e=window.sessionStorage;if(e){var t=(new Date).valueOf().toString();e.setItem(s,t);var n=e.getItem(s)==t;return e.removeItem(s),n}}catch(r){}return!1})}function u(){return t("postMessage",function(){return"postMessage"in window})}var i={},s="__SmartSignals_FeatureTest__";e.configure=n,e.embeded=r,e.localStorage=o,e.sessionStorage=a,e.postMessage=u}(featureDetection||(featureDetection={})),exports.__esModule=!0,exports["default"]=featureDetection;

},{}],16:[function(require,module,exports,define){
!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],function(){return e.Channel=t()}):e.Channel=t()}(this,function(){"use strict";var e=function(){function e(e,t,n,o){function i(t){for(var n=0;n<t.length;n++)if(t[n].win===e)return!0;return!1}var a=!1;if("*"===t){for(var s in r)if(r.hasOwnProperty(s)&&"*"!==s&&"object"==typeof r[s][n]&&(a=i(r[s][n])))break}else r["*"]&&r["*"][n]&&(a=i(r["*"][n])),!a&&r[t]&&r[t][n]&&(a=i(r[t][n]));if(a)throw"A channel is already bound to the same window which overlaps with origin '"+t+"' and has scope '"+n+"'";"object"!=typeof r[t]&&(r[t]={}),"object"!=typeof r[t][n]&&(r[t][n]=[]),r[t][n].push({win:e,handler:o})}function t(e,t,n){for(var o=r[t][n],i=0;i<o.length;i++)o[i].win===e&&o.splice(i,1);0===r[t][n].length&&delete r[t][n]}function n(e){return Array.isArray?Array.isArray(e):-1!=e.constructor.toString().indexOf("Array")}var o=Math.floor(1000001*Math.random()),r={},i={},a=function(e){try{var t=JSON.parse(e.data);if("object"!=typeof t||null===t)throw"malformed"}catch(e){return}var n,o,a,s=e.source,c=e.origin;if("string"==typeof t.method){var d=t.method.split("::");2==d.length?(n=d[0],a=d[1]):a=t.method}if("undefined"!=typeof t.id&&(o=t.id),"string"==typeof a){var l=!1;if(r[c]&&r[c][n])for(var f=0;f<r[c][n].length;f++)try{if(r[c][n][f].win===s){r[c][n][f].handler(c,a,t),l=!0;break}}catch(e){}if(!l&&r["*"]&&r["*"][n])for(var f=0;f<r["*"][n].length;f++)try{if(r["*"][n][f].win===s){r["*"][n][f].handler(c,a,t);break}}catch(e){}}else"undefined"!=typeof o&&i[o]&&i[o](c,a,t)};return window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent&&window.attachEvent("onmessage",a),{build:function(r){var a=function(e){if(r.debugOutput&&window.console&&window.console.log){try{"string"!=typeof e&&(e=JSON.stringify(e))}catch(t){}window.console.log("["+d+"] "+e)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof r)throw"Channel build invoked without a proper object argument";if(!r.window||!r.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===r.window)throw"target window is same as present window -- not allowed";var s=!1;if("string"==typeof r.origin){var c;"*"===r.origin?s=!0:null!==(c=r.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(r.origin=c[0].toLowerCase(),s=!0)}if(!s)throw"Channel.build() called with an invalid origin";if("undefined"!=typeof r.scope){if("string"!=typeof r.scope)throw"scope, when specified, must be a string";if(r.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}else r.scope="__default";var d=function(){for(var e="",t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;5>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}(),l={},f={},u={},h=!1,p=[],m=[],g=function(e,t,n){var o=!1,r=!1;return{origin:t,invoke:function(t,o){if(!u[e])throw"attempting to invoke a callback of a nonexistent transaction: "+e;for(var r=!1,i=0;i<n.length;i++)if(t===n[i]){r=!0;break}if(!r)throw"request supports no such callback '"+t+"'";v({id:e,callback:t,params:o})},error:function(t,n){if(r=!0,!u[e])throw"error called for nonexistent message: "+e;delete u[e],v({id:e,error:t,message:n})},complete:function(t){if(r=!0,!u[e])throw"complete called for nonexistent message: "+e;delete u[e],v({id:e,result:t})},delayReturn:function(e){return"boolean"==typeof e&&(o=e===!0),o},completed:function(){return r}}},w=function(e,t,n){return window.setTimeout(function(){if(f[e]){var o="timeout ("+t+"ms) exceeded on method '"+n+"'";f[e].error&&f[e].error("timeout_error",o),delete f[e],delete i[e]}},t)},b=function(e,t,o){if("function"==typeof r.gotMessageObserver)try{r.gotMessageObserver(e,o)}catch(s){a("gotMessageObserver() raised an exception: "+s.toString())}if(o.id&&t){u[o.id]={};var c=g(o.id,e,o.callbacks?o.callbacks:[]);if(l[t])try{if(o.callbacks&&n(o.callbacks)&&o.callbacks.length>0)for(var d=0;d<o.callbacks.length;d++){for(var h=o.callbacks[d],p=o.params,m=h.split("/"),w=0;w<m.length-1;w++){var b=m[w];"object"!=typeof p[b]&&(p[b]={}),p=p[b]}p[m[m.length-1]]=function(){var e=h;return function(t){return c.invoke(e,t)}}()}var y=l[t](c,o.params);c.delayReturn()||c.completed()||c.complete(y)}catch(s){var v="runtime_error",k=null;if("string"==typeof s?k=s:"object"==typeof s&&(s instanceof Error?(v=s.constructor.name,k=s.message):s&&n(s)&&2==s.length?(v=s[0],k=s[1]):"string"==typeof s.error&&(v=s.error,s.message?"string"==typeof s.message?k=s.message:s=s.message:k="")),null===k)try{k=JSON.stringify(s),"undefined"==typeof k&&(k=s.toString())}catch(_){k=s.toString()}c.error(v,k)}else c.error("method_not_found","No method '"+t+"' was (yet) bound by the provider")}else o.id&&o.callback?f[o.id]&&f[o.id].callbacks&&f[o.id].callbacks[o.callback]?f[o.id].callbacks[o.callback](o.params):a("ignoring invalid callback, id:"+o.id+" ("+o.callback+")"):o.id?f[o.id]?(o.error?f[o.id].error&&f[o.id].error(o.error,o.message):void 0!==o.result?f[o.id].success(o.result):f[o.id].success(),delete f[o.id],delete i[o.id]):a("ignoring invalid response: "+o.id):t&&l[t]&&l[t]({origin:e},o.params)};e(r.window,r.origin,r.scope,b);var y=function(e){return[r.scope,e].join("::")},v=function(e,t){if(!e)throw"postMessage called with null message";if(t||h){if("function"==typeof r.postMessageObserver)try{r.postMessageObserver(r.origin,e)}catch(n){a("postMessageObserver() raised an exception: "+n.toString())}a("post message: "+JSON.stringify(e)+" with origin "+r.origin),r.window.postMessage(JSON.stringify(e),r.origin)}else a("queue message: "+JSON.stringify(e)),p.push(e)},k=function(e,t){if(a("ready msg received"),h&&!r.reconnect)throw"received ready message while in ready state.";h=!0,d.length<6&&(d+="publish-request"===t.type?"-R":"-L"),a("ready msg accepted."),"publish-request"===t.type&&j.notify({method:"__ready",params:{type:"publish-reply",publish:m}});for(var n=0;n<t.publish.length;n++)"bind"===t.publish[n].action?_([t.publish[n].method],j.remote):delete j.remote[t.publish[n].method];for(r.reconnect||j.unbind("__ready",!0);p.length;)v(p.splice(0,1)[0]);m=[],"function"==typeof r.onReady&&r.onReady(j)},_=function(e,t){e=[].concat(e);for(var n,o=0;o<e.length;o++)n=e[o].toString(),t[n]=function(e){return function(t,n,o){n?j.call({method:e,params:t,success:n,error:o}):j.notify({method:e,params:t})}}(n)},S=function(e,t){_([t],j.remote)},M=function(e,t){j.remote[t]&&delete j.remote[t]},j={remote:{},unbind:function(e,t){if(l[e]){if(!delete l[e])throw"can't delete method: "+e;return r.publish&&!t&&(h?j.notify({method:"__unbind",params:e}):m.push({action:"unbind",method:e})),!0}return!1},bind:function(e,t,n){if(!e||"string"!=typeof e)throw"'method' argument to bind must be string";if(!t||"function"!=typeof t)throw"callback missing from bind params";if(l[e])throw"method '"+e+"' is already bound!";return l[e]=t,r.publish&&!n&&(h?j.notify({method:"__bind",params:e}):m.push({action:"bind",method:e})),this},call:function(e){if(!e)throw"missing arguments to call function";if(!e.method||"string"!=typeof e.method)throw"'method' argument to call must be string";if(!e.success||"function"!=typeof e.success)throw"'success' callback missing from call";var t={},n=[],r=[],a=function(e,o){var i=function(e,t){for(var n=e.length,o=0;n>o;o++)if(O[o]===t)return o;return-1};if(i(r,o)>=0)throw"params cannot be a recursive data structure";if(r.push(o),"object"==typeof o)for(var s in o)if(o.hasOwnProperty(s)){var c=e+(e.length?"/":"")+s;"function"==typeof o[s]?(t[c]=o[s],n.push(c),delete o[s]):"object"==typeof o[s]&&a(c,o[s])}};a("",e.params);var s={id:o,method:y(e.method),params:e.params};n.length&&(s.callbacks=n),e.timeout&&w(o,e.timeout,y(e.method)),f[o]={callbacks:t,error:e.error,success:e.success},i[o]=b,o++,v(s)},notify:function(e){if(!e)throw"missing arguments to notify function";if(!e.method||"string"!=typeof e.method)throw"'method' argument to notify must be string";v({method:y(e.method),params:e.params})},destroy:function(){t(r.window,r.origin,r.scope),window.removeEventListener?window.removeEventListener("message",b,!1):window.detachEvent&&window.detachEvent("onmessage",b),h=!1,l={},u={},f={},r.origin=null,p=[],a("channel destroyed"),d=""}};return j.bind("__ready",k,!0),j.bind("__bind",S,!0),j.bind("__unbind",M,!0),r.remote&&_(r.remote,j.remote),setTimeout(function(){d.length>0&&v({method:y("__ready"),params:{type:"publish-request",publish:m}},!0)},0),j}}}();return e});

},{}],17:[function(require,module,exports,define){
var SmartSignals=window.SmartSignals=window.SmartSignals||{};!function(e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports&&(module.exports=e())}(function(){function e(e){return"[object Function]"===S.call(e)}function t(e){return"[object Array]"===S.call(e)}function i(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function n(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function r(e,t){return q.call(e,t)}function o(e,t){return r(e,t)&&e[t]}function s(e,t){var i;for(i in e)if(r(e,i)&&t(e[i],i))break}function a(i,n,o,u){return n&&s(n,function(n,s){(o||!r(i,s))&&(!u||"object"!=typeof n||!n||t(n)||e(n)||n instanceof RegExp?i[s]=n:(i[s]||(i[s]={}),a(i[s],n,o,u)))}),i}function u(e,t){return function(){return t.apply(e,arguments)}}function d(){return document.getElementsByTagName("script")}function f(e){throw e}function c(e,t,i,n){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=n,i&&(r.originalError=i),r}function l(){function l(e){var t,i;for(t=0;t<e.length;t++)if(i=e[t],"."===i)e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function p(e,t){var i,n,r=t&&t.split("/");return e&&(e=e.split("/"),i=e.length-1,"."===e[0].charAt(0)&&r&&(n=r.slice(0,r.length-1),e=n.concat(e)),l(e),e=e.join("/")),e}function m(e){i(d(),function(t){return t.getAttribute("data-smartsignals-requiremodule")===e?(t.parentNode.removeChild(t),!0):void 0})}function g(e,t){var i,n=t?t.name:null,r=e,o=!0,s="";return e||(o=!1,e="_@r"+(Q+=1)),e&&(s=p(e,n),i=U.nameToUrl(s)),{name:s,parentMap:t,url:i,originalName:r,isDefine:o,id:s}}function v(e){var t=e.id,i=o(O,t);return i||(i=O[t]=new U.Module(e)),i}function E(e,t,i){var n=e.id,s=o(O,n);!r(F,n)||s&&!s.defineEmitComplete?(s=v(e),s.error&&"error"===t?i(s.error):s.on(t,i)):"defined"===t&&i(F[n])}function y(e,t){var n=e.requireModules,r=!1;t?t(e):(i(n,function(t){var i=o(O,t);i&&(i.error=e,i.events.error&&(r=!0,i.emit("error",e)))}),r||h.onError(e))}function x(e){delete O[e],delete B[e]}function S(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,i(e.depMaps,function(i,r){var s=i.id,a=o(O,s);!a||e.depMatched[r]||n[s]||(o(t,s)?(e.defineDep(r,F[s]),e.check()):S(a,t,n))}),n[r]=!0)}function q(){var e,t=1e3*R.waitSeconds,n=t&&U.startTime+t<(new Date).getTime(),r=[],o=[],a=!1,u=!0;if(!A){if(A=!0,s(B,function(e){var t=e.map,i=t.id;if(e.enabled&&(t.isDefine||o.push(e),!e.error))if(!e.inited&&n)r.push(i),m(i);else if(!e.inited&&e.fetched&&t.isDefine)return a=!0,u=!1}),n&&r.length)return e=c("timeout","Load timeout for modules: "+r,null,r),y(e);u&&i(o,function(e){S(e,{},{})}),!n&&a&&(N||(N=setTimeout(function(){N=0,q()},50))),A=!1}}function M(e){r(F,e[0])||v(g(e[0],null)).init(e[1],e[2])}function j(e,t,i,n){e.detachEvent&&!k?n&&e.detachEvent(n,t):e.removeEventListener(i,t,!1)}function D(e){var t=e.currentTarget||e.srcElement;return j(t,U.onScriptLoad,"load","onreadystatechange"),j(t,U.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-smartsignals-requiremodule")}}function w(){for(var e;$.length;){if(e=$.shift(),null===e[0])return y(c("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));M(e)}}var A,L,U,C,N,R={waitSeconds:7,baseUrl:"./",paths:{},config:{}},O={},B={},I={},$=[],F={},P={},Q=1;return C={require:function(e){return e.require?e.require:e.require=U.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?F[e.map.id]=e.exports:e.exports=F[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return o(R.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},L=function(e){this.events=o(I,e.id)||{},this.map=e,this.depExports=[],this.depMaps=[],this.depMatched=[],this.depCount=0},L.prototype={init:function(e,t,i,n){n=n||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,U.startTime=(new Date).getTime();this.map;return this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,U.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var t,i,n=this.map.id,r=this.depExports,o=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(e(s)){if(this.events.error&&this.map.isDefine||h.onError!==f)try{o=U.execCb(n,s,r,o)}catch(a){t=a}else o=U.execCb(n,s,r,o);if(this.map.isDefine&&void 0===o&&(i=this.module,i?o=i.exports:this.usingExports&&(o=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",y(this.error=t)}else o=s;this.exports=o,this.map.isDefine&&!this.ignore&&(F[n]=o,h.onResourceLoad&&h.onResourceLoad(U,this.map,this.depMaps)),x(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},enable:function(){B[this.map.id]=this,this.enabled=!0,this.enabling=!0,i(this.depMaps,u(this,function(e,t){var i,n,s;if("string"==typeof e){if(e=g(e,this.map.isDefine?this.map:this.map.parentMap),this.depMaps[t]=e,s=o(C,e.id))return void(this.depExports[t]=s(this));this.depCount+=1,E(e,"defined",u(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?E(e,"error",u(this,this.errback)):this.events.error&&E(e,"error",u(this,function(e){this.emit("error",e)}))}i=e.id,n=O[i],r(C,i)||!n||n.enabled||U.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){i(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},U={config:R,registry:O,defined:F,urlFetched:P,defQueue:$,Module:L,makeModuleMap:g,nextTick:h.nextTick,onError:y,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t={paths:!0,config:!0};s(e,function(e,i){t[i]?(R[i]||(R[i]={}),a(R[i],e,!0,!0)):R[i]=e}),s(O,function(e,t){e.inited||(e.map=g(t,null))})},makeRequire:function(t,i){function s(n,o,a){var u,d,f;return"string"==typeof n?e(o)?y(c("requireargs","Invalid require call"),a):t&&r(C,n)?C[n](O[t.id]):h.get?h.get(U,n,t,s):(d=g(n,t),u=d.id,r(F,u)?F[u]:y(c("notloaded",'Module name "'+u+'" has not been loaded yet'+(t?"":". Use require([])")))):(w(),U.nextTick(function(){w(),f=v(g(null,t)),f.skipMap=i.skipMap,f.init(n,o,a,{enabled:!0}),q()}),s)}return i=i||{},a(s,{toUrl:function(e){var i,n=e.lastIndexOf("."),r=e.split("/")[0],o="."===r||".."===r;return-1!==n&&(!o||n>1)&&(i=e.substring(n,e.length),e=e.substring(0,n)),U.nameToUrl(p(e,t&&t.id),i,!0)},defined:function(e){return r(F,g(e,t).id)},specified:function(e){return e=g(e,t).id,r(F,e)||r(O,e)}}),t||(s.undef=function(e){var i=g(e,t),r=o(O,e);r.undefed=!0,m(e),delete F[e],delete P[i.url],delete I[e],n($,function(t,i){t[0]===e&&$.splice(i,1)}),r&&(r.events.defined&&(I[e]=r.events),x(e))}),s},enable:function(e){var t=o(O,e.id);t&&v(e).enable()},completeLoad:function(e){for(var t,i,n;$.length;){if(i=$.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);M(i)}return n=o(O,e),t||r(F,e)||!n||n.inited?void q():y(c("nodefine","No define call for "+e,null,[e]))},nameToUrl:function(e,i,n){var r,s,a,u,d,f;if(h.jsExtRegExp.test(e))d=e+(i||"");else{for(r=R.paths,s=e.split("/"),a=s.length;a>0;a-=1)if(u=s.slice(0,a).join("/"),f=o(r,u)){t(f)&&(f=f[0]),s.splice(0,a,f);break}d=s.join("/"),d+=i||(/^data\:|\?/.test(d)||n?"":".js"),d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":R.baseUrl)+d}return R.urlArgs?d+((-1===d.indexOf("?")?"?":"&")+R.urlArgs):d},load:function(e,t){h.load(U,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){if("load"===e.type||T.test((e.currentTarget||e.srcElement).readyState)){b=null;var t=D(e);U.completeLoad(t.id)}},onScriptError:function(e){var t=D(e);return y(c("scripterror","Script error for: "+t.id,e,[t.id]))}},U.require=U.makeRequire(),U}function p(){return b&&"interactive"===b.readyState?b:(n(d(),function(e){return"interactive"===e.readyState?b=e:void 0}),b)}var h,m,g,v,b,E,y,x=Object.prototype,S=x.toString,q=x.hasOwnProperty,M=Array.prototype,T=(M.splice,"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/),k="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),j=!1;return"undefined"!=typeof SmartSignals.require?{require:SmartSignals.require,define:SmartSignals.define}:(h=function(e,i,n,r){var o;return t(e)||"string"==typeof e||(o=e,t(i)?(e=i,i=n,n=r):e=[]),y||(y=l()),o&&y.configure(o),y.require(e,i,n)},h.config=function(e){return h(e)},h.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},SmartSignals.require=h,h.jsExtRegExp=/^\/|:|\?|\.js$/,h({}),i(["toUrl","undef","defined","specified"],function(e){h[e]=function(){return y.require[e].apply(y,arguments)}}),g=document.getElementsByTagName("head")[0],v=document.getElementsByTagName("base")[0],v&&(g=v.parentNode),h.onError=f,h.createNode=function(){var e=document.createElement("script");return e.type="text/javascript",e.charset="utf-8",e.async=!0,e},h.load=function(e,t,i){var n;return n=h.createNode(),n.setAttribute("data-smartsignals-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0||k?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(j=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,E=n,v?g.insertBefore(n,v):g.appendChild(n),E=null,n},SmartSignals.define=m=function(e,i,n){var r;"string"!=typeof e&&(n=i,i=e,e=null),t(i)||(n=i,i=null),j&&(r=E||p(),r&&(e||(e=r.getAttribute("data-smartsignals-requiremodule")))),y.defQueue.push([e,i,n])},m.amd={},{require:h,define:m})});

},{}],18:[function(require,module,exports,define){
var JSON=require("json"),storageService_1=require("./storageService"),SmartHarvesterService=function(){function t(){this._storage=new storageService_1["default"],this._maxLength=4096,this._saveRetryCount=3}return t.prototype.readData=function(){var t;try{var e=this._storage.getItem();e&&(t=JSON.parse(e))}catch(r){}return t},t.prototype.getData=function(t){var e=this.readData();if(e&&(!t||e.d))return e},t.prototype.trackEx=function(t,e,r,n,a,i){this._isUndefinedOrNull(e)&&(e=""),this._isUndefinedOrNull(r)&&(r=""),this._isUndefinedOrNull(n)&&(n=""),this._isUndefinedOrNull(a)&&(a=""),this._isUndefinedOrNull(i)&&(i=""),t=t||{};var s=this._getOrCreateTargetGroup(t,e),o=this._getOrCreateCampaign(s,r);o.c++;var u=this._getOrCreateTrace(o,n,a);return u.c++,u.lt=this._timestamp(),t.d=1,t},t.prototype.track=function(t,e,r,n,a){try{var i=this.getData()||{};return this.trackEx(i,t,e,r,n,a),this.save(i),!0}catch(s){}return!1},t.prototype.resetDirty=function(){var t=this.getData();return t&&t.d?(t.d=0,this.save(t)):!0},t.prototype.save=function(t){try{var e=this._saveRetryCount;do{var r=JSON.stringify(t);if(r.length<this._maxLength)try{return this._storage.setItem(r),!0}catch(n){e--}if(!this._removeOldestTrace(t))return!1}while(e)}catch(a){}return!1},t.prototype._isUndefinedOrNull=function(t){return"undefined"==typeof t||null===t},t.prototype._removeOldestTrace=function(t){if(!t)return!1;for(var e=this._timestamp(),r=null,n=-1,a=0;a<t.ts.length;a++)for(var i=t.ts[a],s=0;s<i.cs.length;s++)for(var o=i.cs[s],u=0;u<o.ts.length;u++){var f=o.ts[u];e>f.ft&&(e=f.ft,r=o,n=u)}if(r){r.ts.splice(n,1)[0];return!0}return!1},t.prototype._getOrCreateTargetGroup=function(t,e){for(var r,n=t.ts=t.ts||new Array,a=0,i=n.length;i>a;a++)if(r=n[a],r.id===e)return r;return r={},r.id=e,n.push(r),r},t.prototype._getOrCreateCampaign=function(t,e){for(var r,n=t.cs=t.cs||new Array,a=0,i=n.length;i>a;a++)if(r=n[a],r.id===e)return r;return r={},r.id=e,r.c=0,n.push(r),r},t.prototype._getOrCreateTrace=function(t,e,r){for(var n,a=t.ts=t.ts||new Array,i=0,s=a.length;s>i;i++)if(n=a[i],n.v===e)return n;return n={},n.v=e,n.c=0,n.ft=this._timestamp(),a.push(n),n},t.prototype._timestamp=function(){return Math.floor((new Date).valueOf()/1e3/60)},t.prototype._timestampDate=function(t){return new Date(60*t*1e3)},t}();exports.__esModule=!0,exports["default"]=SmartHarvesterService;

},{"./storageService":20,"json":"json"}],19:[function(require,module,exports,define){
var Promise=require("promise"),easyXDM=require("easyXDM"),Helpers_1=require("../../Libs/Helpers"),featureDetection_1=require("../../Libs/featureDetection"),XdmProxy=function(){function e(e){this.rpc=e}return e.create=function(t){return new Promise(function(r,n){if(!featureDetection_1["default"].postMessage()&&!Helpers_1["default"].isSameDomain(t))return void n(new Error("not supported"));var o=new easyXDM.Rpc({remote:t,onReady:function(){r(new e(o))}},{remote:{track:{},getData:{},resetDirty:{}}})})},e.prototype.track=function(e,t,r,n,o){var i=this;return new Promise(function(u,s){i.rpc.track(e,t,r,n,o,function(e){u(e)},function(e){s(e)})})},e.prototype.getData=function(e){var t=this;return new Promise(function(r,n){t.rpc.getData(e,function(e){r(e)},function(e){r()})})},e.prototype.resetDirty=function(){var e=this;return new Promise(function(t,r){e.rpc.resetDirty(function(e){t(e)},function(e){t(!1)})})},e.prototype.destroy=function(){this.rpc.destroy()},e}();exports.__esModule=!0,exports["default"]=XdmProxy;

},{"../../Libs/Helpers":7,"../../Libs/featureDetection":15,"easyXDM":14,"promise":"promise"}],20:[function(require,module,exports,define){
var jscookie=require("js-cookie"),CookieHelpers_1=require("../../Libs/CookieHelpers"),StorageService=function(){function e(){this._storageKey="cgndta"}return e.prototype.getItem=function(){var e;try{if(e=jscookie.get(this._storageKey),!e&&window.localStorage&&(e=window.localStorage.getItem(this._storageKey)))try{this._storeC(e)}catch(t){}}catch(t){}return e},e.prototype._storeC=function(e){jscookie.set(this._storageKey,e,{domain:CookieHelpers_1["default"].getCookieDomainByLevel(-1),path:"/",expires:new Date(2030,1)})},e.prototype.setItem=function(e){try{window.localStorage&&window.localStorage.setItem(this._storageKey,e)}catch(t){}this._storeC(e)},e}();exports.__esModule=!0,exports["default"]=StorageService;

},{"../../Libs/CookieHelpers":1,"js-cookie":30}],21:[function(require,module,exports,define){
var jschannel=require("jschannel"),SimpleBox=function(){function t(e){var i=this;this.opened=!1,this.destroyed=!1,this.contentLoaded=!1,this.openRequest=!1,this.rootElementHovered=!1,this.closeEventTimeoutId=null,this.communicationReady=!1,this.isOverlayAction=!1,this.MAX_SIZE_OFFSET=30,this.defaultSize={width:646,height:462},this._onContentLoaded=function(){if(i.useDynamicDimensions)if(i.opened)i._updateDynamicSize();else{var t=i.getWindowInnerSize();i.beforeGetDimensionCall();var e=function(e,n){"undefined"!=typeof console&&console.info("SLError: "+e+" | "+n),i.useDynamicDimensions=!1,i.setDimensions(i.defaultSize,t),i._showContent()};i.getDimensions(t,function(n){n.width<=t.width&&n.width<=n.maxWidth?(i.setDimensions(n,t),i._showContent()):(i.setDimensions(n,t),i.getDimensions(t,function(e){i.setDimensions(e,t),i._showContent()},e,500))},e,500)}else i._showContent();if(i.onContentLoaded)try{i.onContentLoaded()}catch(n){}},this._onResize=function(){var e=i.rootElement.style;if(i.resizeTimer||(i.resizeTimer=setTimeout(function(){i.resizeTimer=void 0,i._updateDynamicSize()},200)),i.isIE8()){var n=document.documentElement.clientHeight/100*90;n<i.height?(e.visibility="hidden",e.height=n.toString()+t.unit.PIXEL,e.visibility="visible"):e.height!==i.height.toString()+t.unit.PIXEL&&(e.visibility="hidden",e.height=i.height.toString()+t.unit.PIXEL,e.visibility="visible")}},this._onDocumentClick=function(){i.rootElementHovered||i.closeByUser()},t.isBrowserSupported()&&(this.contentUrl=e.contentURL||"about:blank",this.width=e.width,this.widthUnit=e.widthUnit||t.unit.PIXEL,this.height=e.height,this.heightUnit=e.heightUnit||t.unit.PIXEL,this.verticalSnap=e.verticalSnap||t.verticalSnap.CENTER,this.verticalMargin=e.verticalMargin||0,this.verticalMarginUnit=e.verticalMarginUnit||t.unit.PIXEL,this.horizontalSnap=e.horizontalSnap||t.horizontalSnap.CENTER,this.horizontalMargin=e.horizontalMargin||0,this.horizontalMarginUnit=e.horizontalMarginUnit||t.unit.PIXEL,this.useDynamicDimensions=e.dynamicDimensions,this.modal=e.modal||!1,this.closeButtonVisible=void 0!==e.closeButtonVisible?e.closeButtonVisible:!0,this.closeOnOuterClick=e.closeOnOuterClick||!1,this.persistent=e.persistent||!1,this.communicationRequired=e.communicationRequired||!1,this.create())}return t.isBrowserSupported=function(){try{var t=document.createElement("div");t.innerHTML="<!--[if lt IE 8]><i></i><![endif]-->";var e=1==t.getElementsByTagName("i").length;return!e}catch(i){}return!1},t.prototype.isIE8=function(){var t=document.createElement("div");t.innerHTML="<!--[if IE 8]><i></i><![endif]-->";var e=1==t.getElementsByTagName("i").length;return e},t.prototype.open=function(t){var e=this;if(void 0===t&&(t=!0),!this.destroyed&&!this.opened){if(t&&!this.contentLoaded)return void(this.openRequest=!0);if(this.communicationRequired&&!this.communicationReady)return void(this.openRequest=!0);try{if(this.onOpening&&!this.onOpening())return}catch(i){}if(this.opened=!0,this.openRequest=!1,this.rootElement.style.display="block",this.rootElement.style.visibility="visible",this.modal&&(this.overlay.style.display="block"),this.modal){var n=window.document.documentElement.style;this.htmlStyleBackup={overflow:n.overflow,overflowX:n.overflowX,overflowY:n.overflowY},n.overflow=n.overflowX=n.overflowY="hidden";var o=window.document.body.style;this.bodyStyleBackup={overflow:o.overflow,overflowX:o.overflowX,overflowY:o.overflowY},o.overflow=o.overflowX=o.overflowY="hidden"}this.closeOnOuterClick&&(this.closeEventTimeoutId=window.setTimeout(function(){e.closeEventTimeoutId=null,document.addEventListener?document.addEventListener("click",e._onDocumentClick):document.attachEvent&&document.attachEvent("onclick",e._onDocumentClick)},500));try{this.onOpen&&this.onOpen()}catch(i){}}},t.prototype.close=function(){if(!this.destroyed&&this.opened){this.opened=!1,this.rootElement.style.display="none",this.overlay.style.display="none";var t=window.document.body.style,e=window.document.documentElement.style;this.bodyStyleBackup&&(t.overflow=this.bodyStyleBackup.overflow,t.overflowX=this.bodyStyleBackup.overflowX,t.overflowY=this.bodyStyleBackup.overflowY),this.htmlStyleBackup&&(e.overflow=this.htmlStyleBackup.overflow,e.overflowX=this.htmlStyleBackup.overflowX,e.overflowY=this.htmlStyleBackup.overflowY),this.closeOnOuterClick&&(null!=this.closeEventTimeoutId?(window.clearTimeout(this.closeEventTimeoutId),this.closeEventTimeoutId=null):document.removeEventListener?document.removeEventListener("click",this._onDocumentClick):document.detachEvent&&document.detachEvent("onclick",this._onDocumentClick));try{this.onClose&&this.onClose()}catch(i){}}},t.prototype.setContentURL=function(t){this.contentLoaded=!1,this.communicationReady=!1,this.iframe.src=t},t.prototype.setDimensions=function(e,i){var n=e.width,o=e.height;e.maxWidth&&(n=Math.min(n,e.maxWidth)),e.maxHeight&&(o=Math.min(o,e.maxHeight)),i&&(i.width&&(n=Math.min(n,i.width)),i.height&&(o=Math.min(o,i.height))),this.width=n,this.height=o,this.rootElement.style.width=this.width.toString()+t.unit.PIXEL,this.rootElement.style.height=this.height.toString()+t.unit.PIXEL},t.prototype.closeByUser=function(){if(this.opened)try{this.onCloseByUser&&this.onCloseByUser()}catch(t){}finally{this.close()}},t.prototype.createContentCommunication=function(t){return jschannel.build({window:this.iframe.contentWindow,origin:"*",scope:t,reconnect:!0})},t.prototype.rootElementStyle=function(){var e=this.rootElement.style;e.display="block",e.visibility="hidden",e.zIndex="100000",e.position="fixed";var i=this.getMaxSize();e.maxWidth=i.width+t.unit.PIXEL,e.maxHeight=i.height+t.unit.PIXEL,e.width=i.width+t.unit.PIXEL,e.height=i.height+t.unit.PIXEL,this.useDynamicDimensions||(e.width=this.width+this.widthUnit,e.height=this.height+this.heightUnit),e.minHeight="70px",e.minWidth="100px",this.verticalSnap==t.verticalSnap.CENTER||this.isFullHeight()?(e.marginTop="auto",e.marginBottom="auto",e.top="0",e.bottom="0"):this.verticalSnap==t.verticalSnap.TOP?e.top=this.verticalMargin.toString()+this.verticalMarginUnit:this.verticalSnap==t.verticalSnap.BOTTOM&&(e.bottom=this.verticalMargin.toString()+this.verticalMarginUnit),this.horizontalSnap==t.horizontalSnap.CENTER||this.isFullWidth()?(e.marginLeft="auto",e.marginRight="auto",e.left="0",e.right="0"):this.horizontalSnap==t.horizontalSnap.LEFT?e.left=this.horizontalMargin.toString()+this.horizontalMarginUnit:this.horizontalSnap==t.horizontalSnap.RIGHT&&(e.right=this.horizontalMargin.toString()+this.horizontalMarginUnit),this.isIE8()&&(e.maxHeight="none")},t.prototype.getMaxSize=function(){var e=this.getWindowInnerSize(),i=e.width;this.isFullWidth()||(i-=this.MAX_SIZE_OFFSET,this.horizontalSnap!=t.horizontalSnap.CENTER&&(i-=this.getHorizontalMarginInPixels(),i+=.5*this.MAX_SIZE_OFFSET));var n=e.height;return this.isFullHeight()||(n-=this.MAX_SIZE_OFFSET,this.verticalSnap!=t.verticalSnap.CENTER&&(n-=this.getVerticalMarginInPixels(),n+=.5*this.MAX_SIZE_OFFSET)),{width:i,height:n}},t.prototype.getVerticalMarginInPixels=function(){return this.verticalMarginUnit==t.unit.PIXEL?this.verticalMargin:this.getWindowInnerSize().height*(.01*this.verticalMargin)},t.prototype.getHorizontalMarginInPixels=function(){return this.horizontalMarginUnit==t.unit.PIXEL?this.horizontalMargin:this.getWindowInnerSize().width*(.01*this.horizontalMargin)},t.prototype.btnCloseStyle=function(){var e=this;this.btnClose.onclick=function(){return e._onCloseBtnClicked()},this.btnClose.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41Ljg3O4BdAAAJnUlEQVRYR5WXB1CV6RWGWVQ6iKCIoiKiIoKKurJYRte2YIlr11gwlqCxxd6irG11NRljGctaYstiGdtkYmPsvTfGCuMo9i7y38pF8rzXXFbdXZ39Z16v//+V855z3nO+D7dPPF8Ady8vryIxMTHFunTp4jlgwADvPn36+Hbr1s1v4sSJgfPnzw8eP3588aZNm/q2bdvWp3v37t5t2rTxDA8PL1qER+v/v8/vepyGi/L4+/t7VK9e3btnz57F586dG7ply5bI3bt3x+7Zs6fOvn37Gh46dOhr/l+f7zW3b99ebcOGDRHTpk0LadKkiX+JEiW8PDw8iv1eIl/wuBfjKVWqlFf9+vUD8DAMA3Hnzp1rc//+/eGvX79eaDKZdoADubm5hw3D2A+28X0R4yNPnjyZtGjRoqiWLVuWDA0N9cMJL3d392Ls/VkSGiyCbY+yZcv6tmjRIhhvIo8dO9bqyZMn32NsF4Yu8fvgzZs35qdPnzru3bvnYMyhd74/ZDyD//8nOzt7/Pr16+Pbt28fFhsbG+jn5+fzORJO40TdIyQkxA/2IYQ85sKFC71evXq13mw233z+/LkZ7/JWr15t++6772zDhg2zDho0yKLf1NRU64oVK2wnTpzIe/HihUF0Lj169OifR48e7cjcKDQU7MsDCQ/s/IKEXhhz9wgICPCLj48PwfMaFy9eTMnJydlJaJ+eP3/etnDhQluPHj0scXFxpqCgIIP85hKtXP2Sb6NGjRomtGKBiP3GjRsWIpIN+R2krt+ECROiK1euXNLb29uXFP8iEnopxkY+VapUKTV48ODqhP1PLN6JNzmIzc43K2MmHx+fXDSVyya5rCmE3vWdUBsiSIVYDx48aGf9GxzYrf369esXhSaCcNRH9kAhiaJ89EJ0JTp27Fh527ZtHR8/fvwTBJ7u37/fnpycbCEtxq8Z/hgaV1TKlCljKBrp6el5L1++zGG/TWlpaX/AifLYKs5cL1AUuCv2njD3h3nY1KlTG928efPviCmT/NuGDh1qLV26tMGcQg+LFy/uDL/LqKAx1G6ULFnSOaZ3kaZvWM6cOWMjHVkZGRnfo5l6fA9lPz/WSQ9F3BCeD6EJRrHRGzdu7IGq9zx79sy8ePFiW9WqVU2M54qAiNBszNJBnTp1TCLj8rhixYomomfp27evFdWbPD09nSRoSAbNyvrgwQMT+6Zv3bo1uXbt2pGMlcD4uyhgICAsLKwsbBNOnz6dSs4yULu9d+/eFoTr9JBumEtzMdN0HNevX89fuXKlvVmzZmaJD3GZxo4da8PTfNY7xowZ44ya1kkzOGahYdkpz0zGpyPymhAvzfi7KOBBULly5SIIzzeodxXhekQN22rVquX0XhvJo0aNGpkPHDjgID0FDx8+fLt27Vp7r169LJMnT7ZduXIlX9+vXbuWP3r0aKvCr3WKQmRkpGnNmjV2xg3G/52UlNSY/Sow/k4LlEZIpUqVoqnnLrdv396L+MyzZs2yqtRcolMKaE6Gap6yyqfOCwjpW0o1/9atW873u3fvvl2yZIld6RFhrRMCAwONmTNnWukLtszMzL0jRozoTMSrsGcQ4z5uGCqLt7UJXX8InGBi3rhx46wQK9xEUK4haowaNcqKoPIdDkeBC6x5u2rVKnuDBg3MH69TGkeOHGmBqC0rK+vE7NmzB6KtWAiUYtzXjfKrULdu3XgIDIHhGdponowo7+9vJCinnHzmvXv3OqxWa4Ge/Px8Z+i1RlXwcamKwJAhQyxXr14VgbNz5swZQVrimBfKuL8b3S88KioqISUlZTAaOK0IcAD9agTUjJRzGbTZbAV5eXlOKALr1q2zN2/e3OyqDtc6EYCcWRHQ/qz/a4UKFeowpwzjARJhOMzjO3ToMIDQHqYKLNKAFP6+BhCqQUu1KfzKOSff2yNHjjguX76cz1lRQKk509CwYcMP0oCDuTNmzLDQjGzMPUJj+zP26rBnWScB/hMO6y85/XpTftvp/y9QrY0D5IMqaNy4sVkGEfNbCW758uX2rl27WlR2KkGRoonlU5KFZagqiIiIMChbK47lsH5HQkLCH9lPKSgkUB4CtSmzbps3b/6RcN7mVLOrlb7fB1SGjOdB0rFgwQKn4FjnFKaqg7brENQ90ZWTgCLRrl07E+eCjarJ5sLyI83pW4zXYPydBsSEibHVqlVrhzfTL126dJrJpmXLlln5ZigKSoUE1qpVK7O8VnRESt81TlkZiYmJ5s6dO1ukE1c7lvfz5s0zEzETveIc2ppO1SViOBqEAF/gFsLkquSqWb169QYjpjQaTTZngX348OFWHSzSgEBEDPV8CZJ1hZAxVYhrTO9qRv3797fQ/ew4pOa2mSM7hfHGrKkMgoFORrcgPKnIwFecCd0RyazDhw8f5zww6Hx5aslqQtqUuZ+F5kkDnTp10mlo1z6k7czAgQN/gGBn5nwJfu6EPAGgDB7WIKxJNImhnOcruIRcViro43nUse4DhnLuEubHkGGNczY4PZdx1pup/xtccFajlb8wpwVzqwPl33UiOvOgcERCoj6h7MqJNnHSpEnrUXcG5WPQcm2o3sq124wuTBIZx7KzxPQbHBysQ8lAA2baseXs2bMSnYmSzaQNb0Iz4zHeERvxIAKoDXsD3QncPIE/UGOIIR3NiERydHR0Khr4aefOnefv3LnzgAuo+dSpU3ZuyDZuvVaiZGHcAlELR66Fo9x2/PhxG53UDJ5wk7qM6DZxrU/FsZ7s3QRIfO97ryu783okNjqjlRvVaCK12peSSeUPjZU0knT0cB0iD7nhmIiKnZq301icv5Surl8G448ouRs0sn3cD/5Vvnz5KRhPZs+WoCYoBwLBzzciHrEQCaWiJFCI1CoTEWYy0RjLRvMovzTaaDohvkA9Z+3ates+pB7pF++zli5demHKlCnpmkfX/AelOBrjvdhLxuNAOHAp/4M7of4RCYVEodEpVRFoUTPQhfwNogQnoeK5KHwZp2cakdnBn2j/bd269Q5uOWn0gmWMzyFyEzGcwrpO4Gsgz2VczsnJ37yai4T0IBKarHRIsQkgCXQF/dl8ON6Ng9BkVD8F0f4No+MgOYzxfqAL+AZ8BZTz8kCeu4zLzgfGXc/7kdBkaULCrARigTaURyLzLZCq5aV+2wF9l9Ck9BigVEpwyrnC/knjrkeDzr8TgISiaIiI7nASkMhEAUVGpNTT9av3qkBGNU9tVoblyPuC+6Rx1+MiIbZaqLSoSrSZmpY2FinVsgt613eNa57my2Ot1z6/YdzN7X/HfGA8M+xRuAAAAABJRU5ErkJggg==";var i=32,n=32,o=this.btnClose.style;o.position="absolute",o.zIndex="100020",o.right=n*-.5+t.unit.PIXEL,o.top=i*-.5+t.unit.PIXEL,o.width=n+t.unit.PIXEL,o.height=i+t.unit.PIXEL,o.cursor="pointer",(this.isFullWidth()||this.horizontalSnap==t.horizontalSnap.RIGHT&&this.getHorizontalMarginInPixels()<.5*n)&&(o.right="0"),(this.isFullHeight()||this.verticalSnap==t.verticalSnap.TOP&&this.getVerticalMarginInPixels()<.5*i)&&(o.top="0"),this.closeButtonVisible||(o.display="none")},t.prototype.overlayStyle=function(){var t=this.overlay.style;t.display="none",t.zIndex="99990",t.position="fixed",t.top="0",t.left="0",t.width="100%",t.height="100%",t.filter="alpha(opacity=40)",t.backgroundColor="#000",t.opacity="0.40"},t.prototype.iframeStyle=function(){this.iframe.addEventListener?this.iframe.addEventListener("load",this._onContentLoaded):this.iframe.attachEvent&&this.iframe.attachEvent("onload",this._onContentLoaded),this.iframe.src=this.contentUrl,this.iframe.frameBorder="0",this.iframe.setAttribute("frameBorder","0");var t=this.iframe.style;t.zIndex="100010",t.backgroundColor="white",t.border="0",t.width="100%",t.height="100%"},t.prototype.isFullWidth=function(){return!this.useDynamicDimensions&&this.widthUnit==t.unit.PERCENTAGE&&100==this.width},t.prototype.isFullHeight=function(){return!this.useDynamicDimensions&&this.heightUnit==t.unit.PERCENTAGE&&100==this.height},t.prototype.create=function(){var t=this,e=document.getElementsByTagName("body")[0];this.rootElement=document.createElement("div"),this.iframe=document.createElement("iframe"),this.btnClose=document.createElement("img"),this.overlay=document.createElement("div"),window.addEventListener?window.addEventListener("resize",this._onResize):window.attachEvent&&window.attachEvent("onresize",this._onResize),this.closeOnOuterClick&&(this.rootElement.onmouseover=function(){return t._onRootElementMouseOver()},this.rootElement.onmouseout=function(){return t._onRootElementMouseOut()}),this.cssReset(this.rootElement),this.cssReset(this.overlay),this.rootElementStyle(),this.btnCloseStyle(),this.overlayStyle(),this.iframeStyle(),this.rootElement.appendChild(this.iframe),this.rootElement.appendChild(this.btnClose),e.appendChild(this.rootElement),e.appendChild(this.overlay),this.chan=this.createContentCommunication("smasi-lightbox"),this.chan.bind("contentCommunicationReady",function(){return t._contentCommunicationReady()}),this.chan.bind("closeByUser",function(){return t.closeByUser()}),this.chan.bind("panelAction",function(e,i){t.panelAction(i.actionToken,i.closePanel)}),this.chan.bind("sizeChanged",function(){return t._sizeChanged()})},t.prototype.beforeGetDimensionCall=function(){this.rootElement.style.visibility="hidden",this.rootElement.style.display="block"},t.prototype._sizeChanged=function(){this._updateDynamicSize()},t.prototype._updateDynamicSize=function(){var e=this,i=this.getMaxSize(),n=this.rootElement.style;if(n.maxWidth=i.width+t.unit.PIXEL,n.maxHeight=i.height+t.unit.PIXEL,this.useDynamicDimensions){n.width=i.width+t.unit.PIXEL,n.height=i.height+t.unit.PIXEL,this.rootElement.style.visibility="hidden";var o=function(t,n){"undefined"!=typeof console&&console.info("SLError: "+t+" | "+n),e.useDynamicDimensions=!1,e.setDimensions(e.defaultSize,i),e.rootElement.style.visibility="visible"};this.getDimensions(i,function(t){t.width<=i.width&&t.width<=t.maxWidth?(e.setDimensions(t,i),n.visibility="visible"):(e.setDimensions(t,i),e.getDimensions(i,function(t){e.setDimensions(t,i),n.visibility="visible"},o,500))},o,500)}},t.prototype.getDimensions=function(t,e,i,n){this.chan.call({method:"getDimensions-v2",params:t,success:e,timeout:n,error:i})},t.prototype._contentCommunicationReady=function(){this.communicationReady=!0,this.openRequest&&this.open()},t.prototype._showContent=function(){this.contentLoaded=!0,this.openRequest&&this.open()},t.prototype._onCloseBtnClicked=function(){this.closeByUser()},t.prototype._onRootElementMouseOver=function(){this.rootElementHovered=!0},t.prototype._onRootElementMouseOut=function(){this.rootElementHovered=!1},t.prototype.cssReset=function(t){this.setCssDefaults(t);for(var e,i=0;i<t.childNodes.length;++i)e=t.childNodes[i],e.nodeType==e.ELEMENT_NODE&&this.cssReset(e)},t.prototype.getWindowInnerSize=function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},t.prototype.setCssDefaults=function(t){t.style.animation="none",t.style.backfaceVisibility="visible",t.style.background="0",t.style.backgroundAttachment="scroll",t.style.backgroundClip="border-box",t.style.backgroundImage="none",t.style.backgroundOrigin="padding - box",t.style.backgroundPosition="0 0",t.style.backgroundRepeat="repeat",t.style.backgroundSize="auto auto",t.style.border="0",t.style.borderStyle="none",t.style.borderRadius="0",t.style.borderSpacing="0",t.style.bottom="auto",t.style.boxShadow="none",t.style.boxSizing="content-box",t.style.captionSide="top",t.style.clear="none",t.style.color="inherit",t.style.columns="auto",t.style.columnCount="auto",t.style.columnFill="balance",t.style.columnGap="normal",t.style.columnRule="medium none currentColor",t.style.columnSpan="1",t.style.columnWidth="auto",t.style.content="normal",t.style.counterIncrement="none",t.style.counterReset="none",t.style.cursor="auto",t.style.direction="ltr",t.style.display="block",t.style.emptyCells="show",t.style.cssFloat="none",t.style.height="auto",t.style.msHyphens="none",t.style.left="auto",t.style.letterSpacing="normal",t.style.lineHeight="normal",t.style.listStyle="none",t.style.margin="0",t.style.maxHeight="none",t.style.maxWidth="none",t.style.minHeight="0",t.style.minWidth="0",t.style.opacity="1",t.style.orphans="0",t.style.outline="0",t.style.outlineStyle="none",t.style.overflow="visible",t.style.padding="0",t.style.pageBreakAfter="auto",t.style.pageBreakBefore="auto",t.style.pageBreakInside="auto",t.style.perspective="none",t.style.perspectiveOrigin="50%50%",t.style.position="static",t.style.right="auto",t.style.tableLayout="auto",t.style.textAlign="inherit",t.style.textDecoration="none",t.style.textIndent="0",t.style.textShadow="none",t.style.textTransform="none",t.style.top="auto",t.style.transform="none",t.style.transformStyle="flat",t.style.transition="none",t.style.unicodeBidi="normal",t.style.verticalAlign="baseline",t.style.visibility="visible",t.style.whiteSpace="normal",t.style.widows="0",t.style.width="auto",t.style.wordSpacing="normal",t.style.zIndex="auto"},t.prototype.panelAction=function(t,e){var i=this;try{this.onPanelAction&&this.onPanelAction(t),e&&(this.closeByUser(),window.setTimeout(function(){i.destroy()},0))}catch(n){}},t.prototype.destroy=function(){this.destroyed||(this.close(),window.removeEventListener?window.removeEventListener("resize",this._onResize):window.detachEvent&&window.detachEvent("onresize",this._onResize),this.destroyed=!0,this.rootElement.parentNode&&this.rootElement.parentNode.removeChild(this.rootElement),this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay),this.iframe.onload=null,this.btnClose.onclick=null,this.contentUrl=null,this.rootElement=null,this.iframe=null,this.btnClose=null,this.overlay=null,this.chan&&this.chan.destroy())},t.unit={PIXEL:"px",PERCENTAGE:"%"},t.horizontalSnap={LEFT:"left",CENTER:"center",RIGHT:"right"},t.verticalSnap={TOP:"top",CENTER:"center",BOTTOM:"bottom"},t}();exports.SimpleBox=SimpleBox;

},{"jschannel":16}],22:[function(require,module,exports,define){
var __extends=this&&this.__extends||function(e,n){function o(){this.constructor=e}for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)},JSON=require("json"),Helpers_1=require("../../Libs/Helpers"),CookieHelpers_1=require("../../Libs/CookieHelpers"),jscookie=require("js-cookie"),r=require("requirejs"),global_envConfig_1=require("../../global.envConfig"),CorsRequest_1=require("../../Libs/CorsRequest/CorsRequest"),Promise=require("promise"),simpleBox_1=require("../../SmartLightbox/simpleBox"),panelActionHandlers=require("./PanelActionHandlers"),jschannel=require("jschannel"),ActionHandlerManager=function(){function e(){this.actionHandlers={}}return e.prototype.register=function(e,n){n&&(this.actionHandlers[e]=n)},e.prototype.get=function(e){return this.actionHandlers[e]},e.prototype.unregister=function(e){var n=this.actionHandlers[e];n&&Helpers_1["default"].tryDelete(this.actionHandlers,e)},e}();exports.ActionHandlerManager=ActionHandlerManager;var ActionHandler=function(){function e(e){this.engine=e}return e.prototype.handle=function(e){throw new Error("abstract")},e}();exports.ActionHandler=ActionHandler;var CreateCookieHandler=function(e){function n(n){e.call(this,n)}return __extends(n,e),n.prototype.handle=function(e){if("[DomainOneLevelUp]"===e.Domain){var n=Helpers_1["default"].getDomainLevel(location.hostname);n>0&&n--,e.Domain=Helpers_1["default"].getDomainByLevel(n)}else if("[DomainMostTop]"===e.Domain){if(!this.engine.smartCookie.isSupported())return;e.Domain=this.engine.smartCookie.domain.name}CookieHelpers_1["default"].removeFromAllDomains(e.Name,e.Path),jscookie.set(e.Name,e.Value,{expires:e.ExpireDays,path:e.Path,domain:e.Domain})},n}(ActionHandler);exports.CreateCookieHandler=CreateCookieHandler;var PixelHandler=function(e){function n(n){e.call(this,n)}return __extends(n,e),n.prototype.handle=function(e){Helpers_1["default"].whenBodyReady(function(){var n=document.createElement("img");n.src=e.Url,n.alt=e.Alt,n.height=0,n.width=0,n.style.display="none",document.body.appendChild(n)})},n}(ActionHandler);exports.PixelHandler=PixelHandler;var InjectHtmlHandler=function(e){function n(n){e.call(this,n)}return __extends(n,e),n.prototype.handle=function(e){Helpers_1["default"].whenBodyReady(function(){var n=document.createElement("div");n.style.display="none",document.body.appendChild(n),Helpers_1["default"].insertAndExecute(n,e.Html)})},n}(ActionHandler);exports.InjectHtmlHandler=InjectHtmlHandler;var ShowVoucherHandler=function(e){function n(n){e.call(this,n)}return __extends(n,e),n.prototype.handle=function(e){var n=this;r.require.config({baseUrl:global_envConfig_1["default"].distUrl,paths:{polyfill_03:"./polyfill/polyfill_03"}});var o;if(o=e.Delay&&e.Delay>0?new Promise(function(n,o){setTimeout(function(){n()},1e3*e.Delay)}):Promise.resolve(),1===e.LightboxVersion)o.then(function(){n.handleInternalSmartLightbox(e)});else{var t;t=new Promise(function(e,n){r.require(["polyfill_03"],function(n){e(n)})}),Promise.all([o,t]).then(function(o){n.handleInternalJQueryUI(e,o[1].jQuery)})}},n.prototype.handleInternalSmartLightbox=function(e){var n=this;if(simpleBox_1.SimpleBox.isBrowserSupported()){var o=new simpleBox_1.SimpleBox({contentURL:e.Url,width:e.Width,height:e.Height,dynamicDimensions:!0,modal:!0});if(1==e.TrackingActionKindId){var t=!1,i=o.createContentCommunication("VE");i.bind("veCanOpen",function(e,n){t=n.veCanOpen,t?o.open():o.destroy()}),o.onOpening=function(){return t}}o.onOpen=function(){n.onLightboxDisplayed(e.Token)},o.onCloseByUser=function(){n.onLightboxClosed(e.Token)},o.onClose=function(){o.destroy()},o.open()}},n.prototype.handleInternalJQueryUI=function(e,n){function o(e){var n=e.offset();return{left:Math.floor(n.left),top:Math.floor(n.top)}}function t(e){var t=n("#ssvoucher");if(t.dialog("isOpen")){e=void 0===e?!0:e,p=p||t.closest(".ui-dialog"),f=f||o(p);var i=o(p);(e||f.left!=i.left||f.top!=i.top)&&(t.dialog("option","position",{my:"center",at:"center",of:window}),f=o(p))}}function i(){if(h&&g){var o=n("#ssvoucher");o.dialog("open"),d.onLightboxDisplayed(e.Token)}}function r(){n(window).off("resize scroll",t),window.clearInterval(u),n("#ssiframe").remove(),c.dialog("destroy").remove()}var a=".jQueryUIStyleSheet";if(!n(a).length){var l=document.getElementsByTagName("head")[0],s=document.createElement("link");s.id=a,s.rel="stylesheet",s.type="text/css",s.href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/black-tie/jquery-ui.min.css",s.media="all",l.appendChild(s)}var d=this;n("#ssvoucher").remove();var c=n('<div id="ssvoucher"><iframe id="ssiframe" height="'+e.Height+'" width="'+e.Width+'" src="'+e.Url+'" scrolling="no" border="0" frameborder="0" style="display:hidden"></iframe></div>'),u=window.setInterval(function(){t(!1)},150);c.dialog({resizable:!1,autoOpen:!1,height:"auto",width:e.Width+39,show:"fade",hide:"fade",modal:!0,closeText:"",draggable:!1,position:{my:"center",at:"center",of:window},close:function(n,o){r(),d.onLightboxClosed(e.Token)}});var p,f;n(window).on("resize scroll",t);var h=!1;n("#ssiframe").load(function(){if(!h){h=!0;var e=n("#ssvoucher"),o=e.closest(".ui-dialog"),t=o.find(".ui-widget-header"),r=o.find(".ui-widget-content");t.css("background","white"),t.css("border","none"),r.css("background-color","white"),o.css("z-index","100000"),n(".ui-widget-overlay").css("z-index","99990"),i()}});var g=!0;if(1==e.TrackingActionKindId){g=!1;var m=jschannel.build({window:n("#ssiframe")[0].contentWindow,origin:"*",scope:"VE",reconnect:!0});m.bind("veCanOpen",function(e,n){g=n.veCanOpen,g?i():r()})}},n.prototype.onLightboxDisplayed=function(e){CorsRequest_1["default"]({url:this.engine.conf.engineApiUrl+"voucherpopup/LightboxDisplayed",type:"POST",data:{Token:e,Url:window.location.href}})},n.prototype.onLightboxClosed=function(e){CorsRequest_1["default"]({url:this.engine.conf.engineApiUrl+"voucherpopup/LightboxClosed",type:"POST",data:{Token:e}})},n}(ActionHandler);exports.ShowVoucherHandler=ShowVoucherHandler;var ShowPanelHandler=function(e){function n(n){e.call(this,n)}return __extends(n,e),n.prototype.handle=function(e){var n=this;r.require.config({baseUrl:global_envConfig_1["default"].distUrl,paths:{polyfill_03:"./polyfill/polyfill_03"}});var o;o=e.Delay&&e.Delay>0?new Promise(function(n,o){setTimeout(function(){n()},1e3*e.Delay)}):Promise.resolve(),o.then(function(){n.handleInternalPanel(e)})},n.prototype.handleInternalPanel=function(e){var n=this;if(simpleBox_1.SimpleBox.isBrowserSupported()){var o=JSON.parse(e.PanelConfig),t={};t.contentURL=e.Url,t.width=o.Width,t.widthUnit=o.WidthUnit,t.height=o.Height,t.heightUnit=o.HeightUnit,t.horizontalSnap=o.HorizontalSnap,t.horizontalMargin=o.HorizontalMargin,t.horizontalMarginUnit=o.HorizontalMarginUnit,t.verticalSnap=o.VerticalSnap,t.verticalMargin=o.VerticalMargin,t.verticalMarginUnit=o.VerticalMarginUnit,t.dynamicDimensions=o.DynamicDimensions,t.modal=o.Modal,t.closeButtonVisible=o.CloseButtonVisible,t.closeOnOuterClick=o.CloseOnOuterClick,t.persistent=o.Persistent,t.communicationRequired=!0;var i=new simpleBox_1.SimpleBox(t);i.onOpen=function(){n.onPanelOpened(e.Token)},i.onClose=function(){n.onPanelClosed(e.Token)},i.onPanelAction=function(o){n.onPanelAction(e.Token,o)},i.onContentLoaded=function(){n.onPanelContentLoaded(e.Token)},i.open()}},n.prototype.onPanelOpened=function(e){CorsRequest_1["default"]({url:this.engine.conf.engineApiUrl+"panelnotify/opened",type:"POST",data:{Token:e,Url:window.location.href}})},n.prototype.onPanelClosed=function(e){CorsRequest_1["default"]({url:this.engine.conf.engineApiUrl+"panelnotify/closed",type:"POST",data:{Token:e}})},n.prototype.onPanelAction=function(e,n){CorsRequest_1["default"]({url:this.engine.conf.engineApiUrl+"panelnotify/action",type:"POST",data:{Token:e,ActionToken:n}}).promise.then(function(e){if(e)switch(e.KindId){case 1:(new panelActionHandlers.PanelActionBasicHandler).handle(e);break;case 2:(new panelActionHandlers.PanelActionOpenHandler).handle(e)}})},n.prototype.onPanelContentLoaded=function(e){CorsRequest_1["default"]({url:this.engine.conf.engineApiUrl+"panelnotify/contentLoaded",type:"POST",data:{Token:e}})},n}(ActionHandler);exports.ShowPanelHandler=ShowPanelHandler;

},{"../../Libs/CookieHelpers":1,"../../Libs/CorsRequest/CorsRequest":2,"../../Libs/Helpers":7,"../../SmartLightbox/simpleBox":21,"../../global.envConfig":29,"./PanelActionHandlers":24,"js-cookie":30,"jschannel":16,"json":"json","promise":"promise","requirejs":17}],23:[function(require,module,exports,define){
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Helpers_1=require("../../Libs/Helpers");exports.EventTypes={PageView:"PageView",HashChange:"HashChange",SetVariable:"SetVariable",OffsiteTracking:"OffsiteTracking",HistoryPushState:"HistoryPushState",HistoryReplaceState:"HistoryReplaceState",PageHidden:"PageHidden",PageVisible:"PageVisible",PageClose:"PageClose",XTrack:"XTrack"};var EventSourceManager=function(){function e(){this.eventSources={}}return e.prototype.register=function(e,t){t&&(this.eventSources[e]=t,t.register())},e.prototype.get=function(e){return this.eventSources[e]},e.prototype.unregister=function(e){var t=this.eventSources[e];t&&(t.unregister(),Helpers_1["default"].tryDelete(this.eventSources,e))},e}();exports.EventSourceManager=EventSourceManager;var EventSource=function(){function e(e){this.isRegistered=!1,this.engine=e}return e.prototype.register=function(){if(this.isRegistered)throw new Error("Already register");return this.isRegistered=this.doRegister(),this.isRegistered},e.prototype.doRegister=function(){throw new Error("abstract")},e.prototype.unregister=function(){this.isRegistered&&(this.isRegistered=!1,this.doUnregister())},e.prototype.doUnregister=function(){throw new Error("abstract")},e}();exports.EventSource=EventSource;var PageViewSource=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.doRegister=function(){var e=this;return setTimeout(function(){e.engine.track(exports.EventTypes.PageView)},0),!0},t.prototype.doUnregister=function(){},t}(EventSource);exports.PageViewSource=PageViewSource;var HashchangeSource=function(e){function t(t){var n=this;e.call(this,t),this.hashChange=function(e){n.engine.track(exports.EventTypes.HashChange)}}return __extends(t,e),t.prototype.doRegister=function(){var e=this;return"onhashchange"in window?window.addEventListener?window.addEventListener("hashchange",this.hashChange,!1):window.attachEvent&&window.attachEvent("onhashchange",this.hashChange):!function(){var t=location.href;e.pollingTimer=setInterval(function(){var n=location.href;if(t!==n){var i=t;t=n,e.hashChange.call(window,{type:"hashchange",newURL:n,oldURL:i})}},100)}(),!0},t.prototype.doUnregister=function(){"onhashchange"in window?window.addEventListener?window.removeEventListener("hashchange",this.hashChange,!1):window.attachEvent&&window.detachEvent("onhashchange",this.hashChange):(clearInterval(this.pollingTimer),this.pollingTimer=void 0)},t}(EventSource);exports.HashchangeSource=HashchangeSource;var HistoryPushSource=function(e){function t(t){var n=this;e.call(this,t),this.onPushState=function(){n.engine.track(exports.EventTypes.HistoryPushState)}}return __extends(t,e),t.prototype.doRegister=function(){if(!window.history||!window.history.pushState)return!1;this.pushStateOrig=window.history.pushState;var e=this;window.history.pushState=function(){try{setTimeout(e.onPushState,10)}catch(t){}return e.pushStateOrig.apply(this,arguments)}},t.prototype.doUnregister=function(){window.history.pushState=this.pushStateOrig,this.pushStateOrig=void 0},t}(EventSource);exports.HistoryPushSource=HistoryPushSource;var URLSourceChange=function(e){function t(t){var n=this;e.call(this,t),this.currentHash=location.hash,this.currentURL=location.pathname+"?"+location.search,this.hashChange=function(e){n.currentHash!==location.hash&&(n.engine.track(exports.EventTypes.HashChange),n.timeID&&(clearTimeout(n.timeID),n.timeID=void 0),n.currentURL=location.pathname+"?"+location.search,n.currentHash=location.hash)},this.popState=function(e){(n.currentURL!==location.pathname+"?"+location.search||n.currentHash!==location.hash)&&(n.timeID=setTimeout(function(){n.engine.track(exports.EventTypes.HistoryPushState),n.currentURL=location.pathname+"?"+location.search,n.currentHash=location.hash},0))}}return __extends(t,e),t.prototype.doRegister=function(){var e=this,t=this;return"onhashchange"in window?window.addEventListener?window.addEventListener("hashchange",this.hashChange,!1):window.attachEvent&&window.attachEvent("onhashchange",this.hashChange):!function(){var t=location.href;e.pollingTimer=setInterval(function(){var n=location.href;if(t!==n){var i=t;t=n,e.hashChange.call(window,{type:"hashchange",newURL:n,oldURL:i})}},100)}(),window.addEventListener?window.addEventListener("popstate",this.popState,!1):window.attachEvent&&window.attachEvent("onpopstate",this.popState),window.history&&window.history.pushState&&window.history.replaceState&&(this.pushStateOrig=history.pushState,history.pushState=function(){var e=t.pushStateOrig.apply(this,arguments);try{if(t.currentURL===location.pathname+"?"+location.search&&t.currentHash===location.hash)return;t.engine.track(exports.EventTypes.HistoryPushState),t.currentURL=location.pathname+"?"+location.search,t.currentHash=location.hash}catch(n){}return e},this.replaceStateOrig=history.replaceState,history.replaceState=function(){var e=t.replaceStateOrig.apply(this,arguments);try{if(t.currentURL===location.pathname+"?"+location.search&&t.currentHash===location.hash)return;t.engine.track(exports.EventTypes.HistoryReplaceState),t.currentURL=location.pathname+"?"+location.search,t.currentHash=location.hash}catch(n){}return e}),!0},t.prototype.doUnregister=function(){"onhashchange"in window?window.addEventListener?window.removeEventListener("hashchange",this.hashChange,!1):window.attachEvent&&window.detachEvent("onhashchange",this.hashChange):(clearInterval(this.pollingTimer),this.pollingTimer=void 0),window.addEventListener?window.removeEventListener("popstate",this.popState,!1):window.attachEvent&&window.detachEvent("onpopstate",this.popState),history.pushState=this.pushStateOrig,history.replaceState=this.replaceStateOrig},t}(EventSource);exports.URLSourceChange=URLSourceChange;var PageVisibilitySource=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.doRegister=function(){var e=this;if(this.pageId=Helpers_1["default"].createGuid(),"undefined"!=typeof document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),"undefined"==typeof window.addEventListener||"undefined"==typeof document.addEventListener||"undefined"==typeof document[this.hidden])return!1;var t,n,i;this.onBeforeunload=function(){i=!0,t=setTimeout(function(){n=setTimeout(function(){i=!1},1e3)},10)},this.onUnload=function(){clearTimeout(t),clearTimeout(n),t=void 0,n=void 0,e.engine.track(exports.EventTypes.PageClose,"JSONP"),Helpers_1["default"].wait(5)},this.onVisibilitychange=function(){i||(document[e.hidden]?e.engine.track(exports.EventTypes.PageHidden):e.engine.track(exports.EventTypes.PageVisible))},window.addEventListener("beforeunload",this.onBeforeunload,!1),window.addEventListener("unload",this.onUnload,!1),document.addEventListener(this.visibilityChange,this.onVisibilitychange,!1)},t.prototype.doUnregister=function(){window.removeEventListener("beforeunload",this.onBeforeunload,!1),window.removeEventListener("unload",this.onUnload,!1),document.removeEventListener(this.visibilityChange,this.onVisibilitychange,!1),this.onBeforeunload=void 0,this.onUnload=void 0,this.onVisibilitychange=void 0},t.prototype.pageVisible=function(){return this.isRegistered?document[this.hidden]?0:1:2},t}(EventSource);exports.PageVisibilitySource=PageVisibilitySource;

},{"../../Libs/Helpers":7}],24:[function(require,module,exports,define){
var PanelActionBasicHandler=function(){function n(){}return n.prototype.handle=function(n){},n}();exports.PanelActionBasicHandler=PanelActionBasicHandler;var PanelActionOpenHandler=function(){function n(){}return n.prototype.handle=function(n){n.NewWindow?window.open(n.Url):location.href=n.Url},n}();exports.PanelActionOpenHandler=PanelActionOpenHandler;

},{}],25:[function(require,module,exports,define){
var CookieHelpers_1=require("../../Libs/CookieHelpers"),jscookie=require("js-cookie"),SmartCookie=function(){function e(e){this.token=e}return e.getEmpty=function(t){var i=new e(t);return i.domain=CookieHelpers_1["default"].findFriendlyDomain(),i},e.get=function(t){var i=jscookie.get(t);if(!i)return e.getEmpty(t);var o=this.read(i,t);return o?o:(CookieHelpers_1["default"].removeFromAllDomains(t),e.getEmpty(t))},e.read=function(t,i){var o=t.split("|");if(!(o.length<1)){var r=new e(i);if(r.userId=o[0],o.length>1){var n=parseInt(o[1]);r.domain={isSupported:!0,level:n,name:CookieHelpers_1["default"].getCookieDomainByLevel(n)}}else r.domain=CookieHelpers_1["default"].findFriendlyDomain(),r.update();return r}},e.prototype.isSupported=function(){return this.domain.isSupported},e.prototype.stringify=function(){return this.userId+"|"+this.domain.level},e.prototype.update=function(e){if(this.userId=e||e,!this.isSupported()||!this.userId)return!1;try{var t={domain:this.domain.name,path:"/",expires:36500};return t.domain=t.domain,jscookie.set(this.token,this.stringify(),t),!0}catch(i){return!1}},e}();exports.__esModule=!0,exports["default"]=SmartCookie;

},{"../../Libs/CookieHelpers":1,"js-cookie":30}],26:[function(require,module,exports,define){
var Promise=require("promise"),easyXDM=require("easyXDM"),Helpers_1=require("../../Libs/Helpers"),featureDetection_1=require("../../Libs/featureDetection"),XdmUidProxy=function(){function e(e){this.rpc=e}return e.create=function(t){return new Promise(function(r,n){if(!featureDetection_1["default"].postMessage()&&!Helpers_1["default"].isSameDomain(t))return void n(new Error("not supported"));var i=new easyXDM.Rpc({remote:t,onReady:function(){r(new e(i))}},{remote:{getUid:{},setUid:{}}})})},e.prototype.getUid=function(e){var t=this;return new Promise(function(r,n){t.rpc.getUid(e,function(e){r(e)},function(e){r()})})},e.prototype.setUid=function(e,t){var r=this;return new Promise(function(n,i){r.rpc.setUid(e,t,function(e){n(e)},function(e){n(!1)})})},e.prototype.destroy=function(){this.rpc.destroy()},e}();exports.__esModule=!0,exports["default"]=XdmUidProxy;

},{"../../Libs/Helpers":7,"../../Libs/featureDetection":15,"easyXDM":14,"promise":"promise"}],27:[function(require,module,exports,define){
exports["default"]={cdnUrl:"https://cdn.smart-digital-solutions.com/",environment:"",log:!1};

},{}],28:[function(require,module,exports,define){
var smartSignals_envConfig_1=require("./smartSignals.envConfig"),Helpers_1=require("../Libs/Helpers"),jscookie=require("js-cookie"),CorsRequest_1=require("../Libs/CorsRequest/CorsRequest"),actionHandlers=require("./libs/Actionhandler"),eventSources=require("./libs/EventSource"),SmartCookie_1=require("./libs/SmartCookie"),featureDetection_1=require("../Libs/featureDetection"),XdmUidProxy_1=require("./libs/XdmUidProxy"),XdmProxy_1=require("../SmartHarvester/libs/XdmProxy"),xtrack=require("../Libs/Xtrack/Xtrack"),Promise=require("promise"),SmartHarvesterService_1=require("../SmartHarvester/libs/SmartHarvesterService"),core5=require("core5"),Engine=function(){function e(e){this.isEngine=!0,this.offsiteDataTracked=!1,this.xtrackTracked=!1,this.initQueue=e,this.eventSourceManager=new eventSources.EventSourceManager,this.actionHandlerManager=new actionHandlers.ActionHandlerManager,this.initialize()}return e.prototype.initialize=function(){var t=this,r=_smartVars||{};this.conf={},this.conf.clientId=r.clientID,this.conf.environment=r.environment||smartSignals_envConfig_1["default"].environment,this.conf.engineUrl=Helpers_1["default"].fixUrl(r.url),this.conf.cdnUrl=Helpers_1["default"].fixUrl(r.cdnUrl||smartSignals_envConfig_1["default"].cdnUrl),this.conf.externalUserId=r.externalUserId,this.conf.xdmRecognition=!!r.xdmRecognition,this.conf.offsiteTracking=!!r.offsiteTracking,this.conf.historyPushTracking=!!r.historyPushTracking,this.conf.visibilityTracking=!!r.visibilityTracking,this.conf.nativeEventTracking=r.nativeEventTracking!==!1,this.conf.xtrack=!!r.xtrack,this.conf.environmentSuffix=this.conf.environment?"-"+this.conf.environment:"",this.conf.engineApiUrl=this.conf.engineUrl+"api/",this.conf.cdnEngineUrl=this.conf.cdnUrl+"SmartSignals"+this.conf.environmentSuffix+"/",this.conf.cdnHarvesterUrl=Helpers_1["default"].fixUrl(r.harvesterUrl||this.conf.cdnUrl)+"SmartHarvester"+this.conf.environmentSuffix+"/",r.harvesterDomain&&(this.conf.isHarvesterDomainSet=!0),this.conf.UidToken=e.UidTokenPrefix+this.conf.environmentSuffix+"_"+this.conf.clientId,this.conf.GUIdToken=e.UidTokenPrefix+this.conf.environmentSuffix,this.conf.XtrackToken=e.XtrackTokenPrefix+this.conf.environmentSuffix+"_"+this.conf.clientId,this.conf.ignoreXdm=void 0!==jscookie.get("sd_config"),this.conf.xdmRecognition=this.conf.xdmRecognition&&!this.conf.ignoreXdm&&this.isXdmSupported(),this.smartCookie=SmartCookie_1["default"].get(this.conf.UidToken),this.ready=this.resolveUserId().then(function(e){return t.userId=e.userId,t.cdrUser=e.cdrUser,t.gUserId=e.gUserId,t.registerActionHandlers(),t.registerEventSources(),t.processInitQueue()})},e.prototype.isXdmSupported=function(){return featureDetection_1["default"].localStorage()},e.prototype.getXdmRpc=function(){return this.xdmRpc=this.xdmRpc||XdmUidProxy_1["default"].create(this.conf.cdnEngineUrl+"xdmUidProvider.html")},e.prototype.destroyXdmRpc=function(){this.xdmRpc&&this.xdmRpc.then(function(e){e.destroy()}),this.xdmRpc=void 0},e.prototype.createTempUserId=function(){return"*tmp*"+Helpers_1["default"].createGuid().replace(/-/g,"")},e.prototype.resolveUserId=function(){var e=this;return new Promise(function(t,r){var i=e.smartCookie.userId,n=function(){i||(i=e.createTempUserId(),e.smartCookie.update(i)),t({userId:i})};return e.conf.xdmRecognition?void e.getXdmRpc().then(function(r){Promise.all([r.getUid(e.conf.UidToken),r.getUid(e.conf.GUIdToken)]).then(function(r){var n=r[0];n||(i||(i=e.createTempUserId(),e.smartCookie.update(i)),e.setXdmUserId(i));var a=null;n&&n!==i&&(i=n,e.smartCookie.update(i),a=!0),t({cdrUser:a,userId:i,gUserId:r[1]})})},function(e){n()}):void n()})},e.prototype.setXdmUserId=function(e){var t=this;return this.getXdmRpc().then(function(r){return r.setUid(t.conf.UidToken,e)})},e.prototype.setUserId=function(e){e&&(this.userId=e,this.smartCookie.update(e),this.conf.xdmRecognition&&this.setXdmUserId(e))},e.prototype.setGUserId=function(e){var t=this;this.conf.xdmRecognition&&e&&(this.gUserId=e,this.getXdmRpc().then(function(r){return r.setUid(t.conf.GUIdToken,e)}))},e.prototype.registerActionHandlers=function(){this.actionHandlerManager.register("CreateCookie",new actionHandlers.CreateCookieHandler(this)),this.actionHandlerManager.register("InjectHtml",new actionHandlers.InjectHtmlHandler(this)),this.actionHandlerManager.register("Pixel",new actionHandlers.PixelHandler(this)),this.actionHandlerManager.register("ShowVoucher",new actionHandlers.ShowVoucherHandler(this)),this.actionHandlerManager.register("ShowPanel",new actionHandlers.ShowPanelHandler(this))},e.prototype.registerEventSources=function(){this.conf.nativeEventTracking&&(this.eventSourceManager.register("PageView",new eventSources.PageViewSource(this)),this.eventSourceManager.register("UrlSourceChange",new eventSources.URLSourceChange(this)),this.conf.visibilityTracking&&(this.pageVisibilitySource=new eventSources.PageVisibilitySource(this),this.eventSourceManager.register("PageVisibility",this.pageVisibilitySource)))},e.prototype.push=function(e){var t=this;this.ready.then(function(r){t.pushInternal(e)})},e.prototype.pushInternal=function(e){switch(e.type){case"trigger":return this.triggerInternal(e.eventType,e.payload,e.supplementalData,e.tags,e.sectionName,e.dataLayerJson);case"sv":return this.svInternal(e.variables)}},e.prototype.getMobileData=function(){var e=null;if("undefined"!=typeof Bootstrapper&&Bootstrapper.mobile&&Bootstrapper.mobile.dataModel&&Bootstrapper.mobile.dataModel.params){e={};var t=Bootstrapper.mobile.dataModel.params;t&&(t.advertisingId?(e.deviceId=t.advertisingId,t.appVersionInfo&&(e.appName=t.appVersionInfo.appId),e.appVersion=t.appversion,t.activityInfo&&(e.appScreenTitle=t.activityInfo.title,e.appClassName=t.activityInfo.name),e.carrierName=t.carrierName):t.identifiers&&(e.deviceId=t.identifiers.advertisingIdentifier,t.appVersionInfo&&(e.appName=t.appVersionInfo.appId,e.appVersion=t.appVersionInfo.publicVersion),t.screenInfo&&(e.appScreenTitle=t.screenInfo.title,e.appNavigationItemTitle=t.screenInfo.navigationItemTitle,e.appClassName=t.screenInfo.className),e.carrierName=t.carrier))}return e},e.prototype.getTrackData=function(e,t){var r={eventType:e,clientId:this.conf.clientId,userId:this.userId,externalUserId:this.conf.externalUserId,cdrUser:this.cdrUser,gUserId:this.gUserId,cookie:this.smartCookie.isSupported(),noxdm:this.conf.ignoreXdm,title:document.title,url:window.location.href,referrerUrl:document.referrer,pageId:this.pageVisibilitySource&&this.pageVisibilitySource.pageId,pageVisible:this.pageVisibilitySource&&this.pageVisibilitySource.pageVisible(),fp:this.conf.xtrack&&!this.xtrackTracked},i=this.getMobileData();return i&&(r.sourceId=i.sourceId,r.deviceId=i.deviceId,r.appName=i.appName,r.appVersion=i.appVersion,r.appScreenTitle=i.appScreenTitle,r.appNavigationItemTitle=i.appNavigationItemTitle,r.appClassName=i.appClassName,r.carrierName=i.carrierName),t&&t(r),r},e.prototype.trackInternal=function(e,t){var r=this;return CorsRequest_1["default"]({url:this.conf.engineApiUrl+"track",type:"POST",data:e,forceKind:t}).promise.then(function(e){return r.processTrackingResult(e),r.trackOffsiteData(),r.trackXtrack(e),e})},e.prototype.trackInternal2=function(e,t,r,i,n,a,o){return"string"==typeof t&&(t={text:t}),t&&(e.payload=t),r&&(e.supplementalData=r),n&&(e.tags=n),a&&(e.sectionName=a),o&&(e.DataLayerJson=o),this.trackInternal(e,i)},e.prototype.trigger=function(e,t,r,i,n){var a=this;this.ready.then(function(o){a.triggerInternal(e,t,r,i,n)})},e.prototype.triggerInternal=function(e,t,r,i,n,a){var o=this.getTrackData(e);return this.trackInternal2(o,t,r,void 0,i,n,a)},e.prototype.track=function(e,t){var r=this.getTrackData(e);this.trackInternal(r,t)},e.prototype.sv=function(e){var t=this;this.ready.then(function(r){t.svInternal(e)})},e.prototype.svInternal=function(e){var t=this.getTrackData(eventSources.EventTypes.SetVariable);return this.trackInternal2(t,void 0,{sv:e})},e.prototype.processTrackingResult=function(e){try{if(!e)return;if(this.setUserId(e.UserId),this.setGUserId(e.GUserId),e.PendingActions)for(var t in e.PendingActions){var r=e.PendingActions[t],i=void 0;switch(r.Type){case 2:i="CreateCookie";break;case 4:i="InjectHtml";break;case 3:i="Pixel";break;case 1:i="ShowVoucher";break;case 5:i="ShowPanel"}var n=this.actionHandlerManager.get(i);n&&n.handle(r)}}catch(a){}},e.prototype.trackOffsiteData=function(){this.conf.offsiteTracking&&!this.offsiteDataTracked&&(this.offsiteDataTracked=!0,this.conf.isHarvesterDomainSet&&this.isSameDomain()?this.trackOffsiteDataSameDomain():this.trackOffsiteDataCrossDomain())},e.prototype.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},e.prototype.isSameDomain=function(){return this.endsWith(window.location.host,_smartVars.harvesterDomain)},e.prototype.trackOffsiteDataSameDomain=function(){var e=new SmartHarvesterService_1["default"],t=e.getData(!0);if(t){var r=this.getTrackData(eventSources.EventTypes.OffsiteTracking);this.trackInternal2(r,void 0,{offsiteData:t}).then(function(t){e.resetDirty()})}},e.prototype.trackOffsiteDataCrossDomain=function(){var e=this;XdmProxy_1["default"].create(this.conf.cdnHarvesterUrl+"xdmProvider.html").then(function(t){t.getData(!0).then(function(r){if(!r)return void t.destroy();var i=e.getTrackData(eventSources.EventTypes.OffsiteTracking);e.trackInternal2(i,void 0,{offsiteData:r}).then(function(e){t.resetDirty().then(function(e){return t.destroy()})})})})},e.prototype.trackXtrack=function(e){var t=this;this.conf.xtrack&&!this.xtrackTracked&&(this.xtrackTracked=!0,this.smartCookie.isSupported()&&xtrack.resolve(e,function(e){var r=SmartCookie_1["default"].get(t.conf.XtrackToken),i=r.userId;if(i!==e.Hash){var n=t.getTrackData(eventSources.EventTypes.XTrack);t.trackInternal2(n,void 0,{xtrack:e}).then(function(t){r.update(e.Hash)})}}))},e.prototype.processInitQueue=function(){var e=this;return this.initQueue&&core5.Array.isArray(this.initQueue)&&this.initQueue.length?new Promise(function(t,r){var i=0,n=function(){i<e.initQueue.length?e.pushInternal(e.initQueue[i++]).then(function(e){n()}):(e.initQueue.length=0,e.initQueue.push=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];if(t){for(var i=0;i<t.length;i++)e.push(t[i]);return 0}},t(!0))};n()}):Promise.resolve(!0)},e.UidTokenPrefix="smartSignalsUid",e.XtrackTokenPrefix="smartSignalsFph",e}(),smartSignals=window.smartSignals=window.smartSignals&&window.smartSignals.isEngine?window.smartSignals:new Engine(window.smartSignals);exports.__esModule=!0,exports["default"]=smartSignals;

},{"../Libs/CorsRequest/CorsRequest":2,"../Libs/Helpers":7,"../Libs/Xtrack/Xtrack":13,"../Libs/featureDetection":15,"../SmartHarvester/libs/SmartHarvesterService":18,"../SmartHarvester/libs/XdmProxy":19,"./libs/Actionhandler":22,"./libs/EventSource":23,"./libs/SmartCookie":25,"./libs/XdmUidProxy":26,"./smartSignals.envConfig":27,"core5":"core5","js-cookie":30,"promise":"promise"}],29:[function(require,module,exports,define){
exports["default"]={environment:"",distUrl:"https://smartsignals.smart-digital-solutions.de/dist/",cdnUrl:"https://cdn.smart-digital-solutions.com/"};

},{}],30:[function(require,module,exports,define){
(function (global){
JSON=global.JSON=require("json");var __browserify_shim_require__=require;(function(e,o,n){!function(n){if("function"==typeof o&&o.amd)o(n);else if("object"==typeof exports)e.exports=n();else{var t=window.Cookies,r=window.Cookies=n();r.noConflict=function(){return window.Cookies=t,r}}}(function(){function e(){for(var e=0,o={};e<arguments.length;e++){var n=arguments[e];for(var t in n)o[t]=n[t]}return o}function o(n){function t(o,r,i){var c;if(arguments.length>1){if(i=e({path:"/"},t.defaults,i),"number"==typeof i.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(a){}return r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),o=encodeURIComponent(String(o)),o=o.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),o=o.replace(/[\(\)]/g,escape),document.cookie=[o,"=",r,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}o||(c={});for(var p=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,l=0;l<p.length;l++){var d=p[l].split("="),f=d[0].replace(u,decodeURIComponent),m=d.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{if(m=n&&n(m,f)||m.replace(u,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(a){}if(o===f){c=m;break}o||(c[f]=m)}catch(a){}}return c}return t.get=t.set=t,t.getJSON=function(){return t.apply({json:!0},[].slice.call(arguments))},t.defaults={},t.remove=function(o,n){t(o,"",e(n,{expires:-1}))},t.withConverter=o,t}return o()})}).call(global,module,void 0,void 0);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"json":"json"}],"__bootstrap":[function(require,module,exports,define){
var bd=require("./browserDetect"),r=require("requirejs"),global_envConfig_1=require("../../global.envConfig");module.exports=function(e,i){function o(){var e={};for(var r in i.modules){var o=i.modules[r];if(o[1])for(var l in o[1])e[l]=!0}return e}var l=o(),n="json"in l,f="core5"in l,s="promise"in l,t=bd.hasJSON(),d=bd.hasCore5(),a=bd.hasPromise();r.require.config({baseUrl:global_envConfig_1["default"].distUrl,paths:{polyfill_01:"./polyfill/polyfill_01",polyfill_02:"./polyfill/polyfill_02"}}),t&&n&&i.define("json",bd.nativeGetters.JSON()),d&&f&&i.define("core5",bd.nativeGetters.core5()),a&&s&&i.define("promise",bd.nativeGetters.Promise()),!t&&n||!d&&f||!a&&s?!t&&n||!d&&f||a||!s?r.require(["polyfill_01"],function(r){!t&&n&&i.define("json",r.JSON),!d&&f&&i.define("core5",r.core5),!a&&s&&i.define("promise",r.Promise),e()}):r.require(["polyfill_02"],function(r){i.define("promise",r.Promise),e()}):e()};

},{"../../global.envConfig":29,"./browserDetect":8,"requirejs":17}]},{},[28]);
